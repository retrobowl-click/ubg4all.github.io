function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}!function(t,e){"function"==typeof define&&define.amd?define("IronRV",e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():t.IronRV||(t.IronRV=e())}(this,function(){var t=undefined,Pn={DEBUG:!1,LOG_ATOM:!0,SDK_VER:"2.0.19",API_PATH:"https://ultra-rv.com",STATIC_PATH:"https://static.ultra-rv.com",ATOM_ENDPOINT:"https://webrv.atom-ds.com/",ATOM_AUTH:"uG0SpdlbT9TGrowVYhxQmQJIzHip30",OFFER_TIMEOUT:500,PUSHER_CLEAR_TIMEOUT:3600,CLOSE_BUTTON_TIMEOUT:30,CLOSE_BUTTON_TIMEOUT_INTERSTITIAL:10,HIDE_PLAYER_TIMEOUT:2,NO_FILL_COUNT:10,NO_FILL_MINUTES:120,LOCAL_STORAGE_NO_FILL:"ironrv_timestamp",PREF_PREFIX:"rv",PREF_DEVICE_ID:"device_id",PREF_EVENT_ID:"event_id",BASE_STYLES:'.ironrv-bg{position:fixed;padding:0;margin:0;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);z-index:10000;display:none}.ironrv-container{position:fixed;top:50px;width:704px;left:50%;margin-left:-352px;background-color:#1e1e27;border:1px solid #383b3c;border-radius:7px;z-index:10001;display:none;-moz-box-shadow:0 0 15px #000;-webkit-box-shadow:0 0 15px #000;box-shadow:0 0 15px #000;opacity:1}.ironrv-fullscreen{top:0;bottom:0;left:0;margin-left:0;width:100%;height:100%}.ironrv-container.custom-container{top:0;left:0;margin-left:0;position:static}.ironrv-container-header,.ironrv-container-ichdr{position:relative;float:left;width:100%;min-height:50px;color:#d2d7de!important;background-color:#171724;border-bottom:1px solid #3f3d3d;border-top-left-radius:7px;border-top-right-radius:7px}.ironrv-container-header *,.ironrv-container-ichdr *{color:#d2d7de!important}.ironrv-container-header.complete{-webkit-transition:background-color .5s linear;-ms-transition:background-color .5s linear;transition:background-color .5s linear;background-color:#0f3196!important}.ironrv-container-footer{position:relative;float:left;clear:both;width:100%;height:0;background-color:#1e1e27;border-top:1px solid #181a1c;border-bottom-left-radius:7px;border-bottom-right-radius:7px;color:#d2d7de}.ironrv-title-logo{position:absolute;background-repeat:no-repeat;float:left;top:5px;left:10px;z-index:1;width:150px;height:40px;background-size:contain;background-color:transparent}.ironrv-footer,.ironrv-title{float:left;font-family:"Century Gothic","Avant Garde Gothic","Avant Garde","URW Gothic L",helvetica,sans-serif;font-size:16px;margin-top:16px;text-align:center;width:100%;padding-left:30px;padding-right:30px;background-color:transparent}.ironrv-footer{margin-top:11px}.ironrv-close{position:absolute;z-index:1;font-family:arial;font-size:11px;top:14px;right:10px;font-weight:700;cursor:pointer;border:2px solid #c4c9cf;border-radius:50%;padding:2px 5px;padding-top:2px;background-color:transparent}.ironrv-close-inner{z-index:1000;right:15px;color:#fff}.ironrv-close-ins-cross-btn{right:auto;left:15px}.ironrv-close.skip{border:0}#epom-tag-container-outer{position:relative;float:left;clear:both;width:100%;height:396px;background-color:#1e1e27;z-index:1}#epom-tag-container{float:left;width:100%;height:100%}#epom-tag-container-overlay{position:absolute;top:0;left:0;float:left;width:100%;height:100%;background-color:#1e1e27;z-index:1}.ironrv-error{margin:0;position:absolute;top:50%;left:50%;margin-right:-50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);width:300px;height:300px;color:#c7cdd4;font-size:14px;font-family:arial;font-family:"Century Gothic","Avant Garde Gothic","Avant Garde","URW Gothic L",helvetica,sans-serif;text-align:center}.smiley-sad{width:300px;color:#f8f8f8;font-size:100px}.ironrv-loading-texts{position:absolute;text-align:center;bottom:0;width:100%;color:#cacaca;font-weight:300;top:270px;height:30px}.ironrv-text{opacity:0;width:100%;text-align:center;position:absolute;bottom:50px;left:0;font-size:15px;font-family:"Century Gothic","Avant Garde Gothic","Avant Garde","URW Gothic L",helvetica,sans-serif}'};window.IRONRV_CONFIG=Pn,function(t,i){"use strict";function n(t){t=t||{};this.options={endpoint:t.endpoint||"https://track.atom-data.io/",apiVersion:"V1",auth:t.auth||"",sdkVersion:"1.5.0",sdkType:"atom-js"}}function o(t){if(this.params=t||{},"string"!=typeof t.data&&!(t.data instanceof String))try{this.params.data=JSON.stringify(this.params.data)}catch(e){throw new Error("data is invalid - can't be stringified")}this.headers={contentType:"application/json;charset=UTF-8",sdkType:this.params.sdkType,sdkVersion:this.params.sdkVersion},this.xhr=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}function a(t,e,n){this.error=t,this.response=e,this.status=n}function e(t){var e=this;this.retryTimeout=1e3,t=t||{},this.params=t,this.params.flushInterval=t.flushInterval?1e3*t.flushInterval:3e4,this.params.bulkLen=t.bulkLen||20,this.params.bulkSize=t.bulkSize?1024*t.bulkSize:40960,this.params.auth=t.auth||"",this.accumulated={},this.atom=new n(t),this.timer||(this.timer=setInterval(function(){e.flush()},this.params.flushInterval))}function s(t,i){for(var o=[],a=t.length,e=0;e<t.length;e++)!function(t,r){t(function(t,e,n){if(o[r]={err:t,data:e,status:n},0==--a)return i(o)})}(t[e],e)}(t.IronSourceAtom=n).prototype.putEvent=function(t,e){if(!(t=t||{}).stream)return e("Stream is required",null,400);if(!t.data)return e("Data is required",null,400);t.apiVersion=this.options.apiVersion,t.sdkVersion=this.options.sdkVersion,t.sdkType=this.options.sdkType,t.auth=t.auth||this.options.auth,t.endpoint=t.endpoint||this.options.endpoint;var n=new o(t);return t.method&&"GET"===t.method.toUpperCase()?n.get(e):n.post(e)},n.prototype.putEvents=function(t,e){return(t=t||{}).stream?t.data&&t.data instanceof Array&&t.data.length?t.method&&"GET"==t.method.toUpperCase()?e("GET is not a valid method for putEvents",null,400):(t.apiVersion=this.options.apiVersion,t.auth=this.options.auth,t.sdkVersion=this.options.sdkVersion,t.sdkType=this.options.sdkType,t.endpoint=this.options.endpoint+"bulk",new o(t).post(e)):e("Data (must be not empty array) is required",null,400):e("Stream is required",null,400)},n.prototype.health=function(t){var e=this.options;return new o(e).health(t)},"undefined"!=typeof module&&module.exports&&(module.exports={IronSourceAtom:n,Request:o,Response:a,Tracker:e,taskMap:s}),o.prototype.post=function(n){if(!this.params.stream||!this.params.data)return n("Stream and Data fields are required",null,400);var r=this.xhr,t=JSON.stringify({data:this.params.data,table:this.params.stream,apiVersion:this.params.apiVersion,auth:this.params.auth?w.HmacSHA256(this.params.data,this.params.auth).toString(w.enc.Hex):""});r.open("POST",this.params.endpoint,!0),r.setRequestHeader("Content-type",this.headers.contentType),r.setRequestHeader("x-ironsource-atom-sdk-type",this.headers.sdkType),r.setRequestHeader("x-ironsource-atom-sdk-version",this.headers.sdkVersion),r.onreadystatechange=function(t){var e;r.readyState===XMLHttpRequest.DONE&&(200==r.status?(e=new a(null,r.response,r.status),n(null,e.data(),r.status)):400<=r.status&&r.status<600?(e=new a(r.response,null,r.status),n(e.err(),null,r.status)):0==r.status&&n("No connection to server",null,500))},r.send(t)},o.prototype.get=function(e){if(!this.params.stream||!this.params.data)return e("Stream and Data fields are required",null,null);var t,n=this.xhr,r=JSON.stringify({table:this.params.stream,data:this.params.data,apiVersion:this.params.apiVersion,auth:this.params.auth?w.HmacSHA256(this.params.data,this.params.auth).toString(w.enc.Hex):""});try{t=btoa(r)}catch(o){}n.open("GET",this.params.endpoint+"?data="+t,!0),n.setRequestHeader("Content-type",this.headers.contentType),n.setRequestHeader("x-ironsource-atom-sdk-type",this.headers.sdkType),n.setRequestHeader("x-ironsource-atom-sdk-version",this.headers.sdkVersion),n.onreadystatechange=function(){var t;n.readyState===XMLHttpRequest.DONE&&(200==n.status?(t=new a(null,n.response,n.status),e(null,t.data(),n.status)):400<=n.status&&n.status<600?(t=new a(n.response,null,n.status),e(t.err(),null,n.status)):0==n.status&&e("No connection to server",null,500))},n.send()},o.prototype.health=function(e){var n=this.xhr;n.open("GET",this.params.endpoint+"health",!0),n.onreadystatechange=function(){var t;n.readyState===XMLHttpRequest.DONE&&(200==n.status?(t=new a(null,n.response,n.status),e&&e(null,t.data(),n.status)):(t=new a(n.response,null,n.status),e&&e(t.err(),null,n.status)))},n.send()},a.prototype.data=function(){if(this.error)return null;try{return JSON.parse(this.response)}catch(t){return this.response}},a.prototype.err=function(){try{return JSON.parse(this.error)}catch(t){return this.error}},(t.IronSourceAtom.Tracker=e).prototype.track=function(t,e){var n,r=this;if(t===i||0==t.length||0==e.length||e===i)throw new Error("Stream name and data are required parameters");if(t in r.accumulated||(r.accumulated[t]=[]),"string"==typeof e||e instanceof String)r.accumulated[t].push(e);else try{r.accumulated[t].push(JSON.stringify(e))}catch(o){throw new Error("Invalid Data - can't be stringified",o)}(r.accumulated[t].length>=r.params.bulkLen||(n=r.accumulated[t],encodeURI(n).split(/%..|./).length-1>=r.params.bulkSize))&&r.flush(t)},e.prototype.flush=function(e,n){function c(r,i,o,a,s){return s&&(u.accumulated[r]=[],s=!1),u.atom.putEvents({stream:r,data:i},function(t,e,n){return null!=t&&500<=n?o<12e5?void setTimeout(function(){o=2*o+Math.floor(1e3*Math.random()+100),c(r,i,o,a,s)},o):a("Timeout - No response from server",null,408):a(t,e,n)})}var u=this,r=this.retryTimeout;n=n||function n(t,e){return t?new Error(t):e};var t=[];if(e)1<=u.accumulated[e].length&&t.push(function(t){c(e,u.accumulated[e],r,t,!0)});else for(var i in u.accumulated)1<=u.accumulated[i].length&&function(e){t.push(function(t){return c(e,u.accumulated[e],r,t,!0)})}(i);return s(t,n)};var u,r,c,l,d,p,h,f,m,v,g,y,b,w=w||(u=Math,c=(y={}).lib={},l=c.Base={extend:function(t){_.prototype=this;var e=new _;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),(e.init.prototype=e).$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},d=c.WordArray=l.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=e!=r?e:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=4294967295<<32-e%4*8,t.length=u.ceil(e/4)},clone:function(){var t=l.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],i=function i(e){var e=e,n=987654321,r=4294967295;return function(){var t=((n=36969*(65535&n)+(n>>16)&r)<<16)+(e=18e3*(65535&e)+(e>>16)&r)&r;return t/=4294967296,(t+=.5)*(.5<u.random()?1:-1)}},n=0;n<t;n+=4){var r=i(4294967296*(o||u.random())),o=987654071*r();e.push(4294967296*r()|0)}return new d.init(e,t)}}),p=y.enc={},h=p.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new d.init(n,e/2)}},f=p.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new d.init(n,e)}},m=p.Utf8={stringify:function(t){try{return decodeURIComponent(escape(f.stringify(t)))}catch(r){throw new Error("Malformed UTF-8 data")}},parse:function(t){return f.parse(unescape(encodeURIComponent(t)))}},v=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=m.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(t){var e=this._data,n=e.words,r=e.sigBytes,i=this.blockSize,o=r/(4*i),a=(o=t?u.ceil(o):u.max((0|o)-this._minBufferSize,0))*i,r=u.min(4*a,r);if(a){for(var s=0;s<a;s+=i)this._doProcessBlock(n,s);var c=n.splice(0,a);e.sigBytes-=r}return new d.init(c,r)},clone:function(){var t=l.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),c.Hasher=v.extend({cfg:l.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){v.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(n){return function(t,e){return new n.init(e).finalize(t)}},_createHmacHelper:function(n){return function(t,e){return new g.HMAC.init(n,e).finalize(t)}}}),g=y.algo={},y);function _(){}!function(i){var t=w,e=(r=t.lib).WordArray,n=r.Hasher,r=t.algo,o=[],m=[];!function(){function t(t){return 4294967296*(t-(0|t))|0}for(var e=2,n=0;n<64;)!function(t){for(var e=i.sqrt(t),n=2;n<=e;n++)if(!(t%n))return;return 1}(e)||(n<8&&(o[n]=t(i.pow(e,.5))),m[n]=t(i.pow(e,1/3)),n++),e++}();var v=[],r=r.SHA256=n.extend({_doReset:function(){this._hash=new e.init(o.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],l=n[7],d=0;d<64;d++){d<16?v[d]=0|t[e+d]:(h=((f=v[d-15])<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,f=((p=v[d-2])<<15|p>>>17)^(p<<13|p>>>19)^p>>>10,v[d]=h+v[d-7]+f+v[d-16]);var p=r&i^r&o^i&o,h=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),f=l+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&u)+m[d]+v[d],l=u,u=c,c=s,s=a+f|0,a=o,o=i,i=r,r=f+(h+p)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+c|0,n[6]=n[6]+u|0,n[7]=n[7]+l|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(64+r>>>9<<4)]=i.floor(n/4294967296),e[15+(64+r>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA256=n._createHelper(r),t.HmacSHA256=n._createHmacHelper(r)}(Math),y=w.lib.Base,b=w.enc.Utf8,w.algo.HMAC=y.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=b.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var t=this._oKey=e.clone(),e=this._iKey=e.clone(),i=t.words,o=e.words,a=0;a<n;a++)i[a]^=1549556828,o[a]^=909522486;t.sigBytes=e.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,t=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(t))}}),t.ironSourceAtomInit=t.ironSourceAtomInit||function(){},t.ironSourceAtomInit()}(window,(document,undefined));var c,An=function(){"use strict";var t,d=((t={}).fadeOut=function(e,t,n){var r=function r(t){e.style.opacity=1-t,1===t&&(e.style.display="none",e.style.opacity="")},n=o(t,r,n);requestAnimationFrame(n)},t.fadeIn=function(e,t,n,r){e.style.opacity=0,e.style.display=n||"block";var i=function i(t){e.style.opacity=t},r=o(t,i,r);requestAnimationFrame(r)},t);function o(n,r,i){var o;return function a(t){var e=t-(o=o||t),t=Math.min(e/n,1);r(t),e<n?requestAnimationFrame(a):"function"==typeof i&&i()}}var n,r,i,p=(i=r=!(n=[]),function(t,e){if("function"!=typeof t)throw new TypeError("callback for docReady(fn) must be a function");r?setTimeout(function(){t(e)},1):(n.push({fn:t,ctx:e}),"complete"===document.readyState?setTimeout(a,1):i||(document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):(document.attachEvent("onreadystatechange",s),window.attachEvent("onload",a)),i=!0))});function a(){if(!r){r=!0;for(var t=0;t<n.length;t++)n[t].fn.call(window,n[t].ctx);n=[]}}function s(){"complete"===document.readyState&&a()}function h(){}var f=window.console;function m(t){if(v("devThrowError: "+t),Pn&&Pn.DEBUG)throw new Error(t)}function v(t){Nn.atomReport&&Nn.atomReport({name:"error_ui",msg:t},"")}(f=f||{}).debug||(f.debug=void 0);var c,g=100,y=(c={},{addElementListener:function(t,e,n){c[t]||(c[t]={}),c[t][e]||(c[t][e]=[]),c[t][e].push(n)},getListeners:function(t,e){return c[t]&&c[t][e]&&c[t][e].length?c[t][e]:[]},dropListeners:function(t,e){c[t]&&c[t][e]&&delete c[t][e]}}),b={elements:{},getStored:function(t,e){if(t){t=this._getId(t);if(t&&this.elements[t])return e?this.elements[t][e]:this.elements[t]}},storeProperty:function(t,e,n){t=this._getId(t);t&&(this.elements[t]||(this.elements[t]={}),this.elements[t][e]=n)},_getId:function(t){switch(!0){case Boolean(t.id):return"#"+t.id;case Boolean(t.className):return"."+t.className;case Boolean(t.tagName):return t.tagName}}};function e(o){var i=[];if(0===o.toString().indexOf("<"))i=function(t){var e=document.createElement("div");e.innerHTML=t;var n=[],r=0;for(;e.firstChild;)if(n.push(e.firstChild),e.removeChild(e.firstChild),++r>g){m("unlimit while log; createElement");break}return n}(o);else if("[object Window]"===o.toString()||"[object HTMLIFrameElement]"===o.toString()||"[object HTMLDivElement]"===o.toString()||"[object HTMLDocument]"===o.toString())i=[o];else try{for(var t=document.querySelectorAll(o),i=[],e=0,n=t.length;e<n;e++)i.push(t[e])}catch(c){throw v("wrapper: "+(c.message||c)),c}var a=i[0];function r(t,e){var n=document.createElement("div");n.innerHTML=e;for(var r=0;n.firstChild;)if(t.appendChild(n.firstChild),++r>g){m("unlimit while log; appendInnerHtml");break}}0===i.length&&function(){var t,e;Pn&&Pn.DEBUG&&(t=Array.prototype.slice.call(arguments),e=f.log,"WARNING"===t.shift()&&(e=f.warn),e=e||h,t.unshift("[ui-helper] >>> "),e.apply(f,t))}("WARNING","no_elements for selector: ",o.toString()),a||(i=[a={style:{},firstChild:null,removeChild:h,appendChild:h,className:"",listeners:{},parentNode:{removeChild:h}}]);var s={length:i.length,get:function(){return a},remove:function(){return a.parentNode.removeChild(a),s},prop:function u(e,n){if(n===undefined)return a[e];function u(t){t[e]=n}for(var t=i.length,r=0;r<t;r++)u(i[r]);return s},val:function(t){return void 0===t?a.value:(a.value=t,s)},append:function(t){return-1<t.toString().indexOf("[object HTML")?a.appendChild(t):r(a,t),s},click:function(t){return s.on("click",t),s},on:function(t,e,n){function r(t){return!e||t.target.nodeName.toLowerCase()===e?n():void 0}void 0===n&&(n=e,e=null);var i=o.toString();return y.addElementListener(i,t,r),a.addEventListener(t,r),s},unbind:function(e){var t=o.toString();return y.getListeners(t,e).forEach(function(t){return a.removeEventListener(e,t)}),y.dropListeners(t,e),s},removeClass:function l(e){function l(t){-1<t.className.indexOf(e)&&(t.className=t.className.split(" ").filter(function(t){return t!==e}).join(" "))}for(var t=i.length,n=0;n<t;n++)l(i[n]);return s},addClass:function(t){return-1===a.className.indexOf(t)&&(a.className+=" "+t),s},html:function(t){return function(t,e){for(var n=0;t.firstChild;)if(t.removeChild(t.firstChild),++n>g){m("unlimit while log; setInnerHtml");break}e&&r(t,e)}(a,t),s},show:function(t){var e=b.getStored(a,"display");return this.css("display",t||e||"inline"),s},hide:function(){var t=this.css("display");return t&&"none"!==t&&b.storeProperty(a,"display",this.css("display")),this.css("display","none"),s},fadeIn:function(t){var e=b.getStored(a,"display");return d.fadeIn(a,400,t||e||"inline"),s},fadeOut:function(){var t=this.css("display");return t&&"none"!==t&&b.storeProperty(a,"display",this.css("display")),d.fadeOut(a,400),s},height:function(t){return t!==undefined?s.css("height",t):a.offsetHeight},width:function(t){return t!==undefined?s.css("width",t):a.offsetWidth},css:function(t,e){return e===undefined?a.style[t]:(a.style[t]=e,s)},ready:function(t){p(t,a)}};return s}function u(t){if(t)return("function"==typeof t?p:e)(t);m("Used without argument")}return u.height=function(){try{var n=document;if(!n||"function"==typeof n.toString||"[object HTMLDocument]"!==n.toString())return;var r=["scrollHeight","offsetHeight","clientHeight"],i=function i(t){if(!n[t])return Infinity;var e=n[t];return Math.min.apply(Math.min,r.map(function(t){return e[t]||0}))},t=Math.min(i("body"),i("documentElement"));return t===Infinity?undefined:t}catch(e){v("document_height")}},u}();function u(){this._listeners={}}window.$rv=An,c=function c(t){if(Pn.DEBUG&&window.console){if(window.console.error)return window.console.error(t);window.console.log&&window.console.log(t)}},u.prototype={addListener:function(t,e){return(this._listeners[t]=this._listeners[t]||[]).push(e),this},removeListener:function(t,e){if(1===arguments.length)this._listeners[t]=[];else if("function"==typeof e){var n=this._listeners[t];if(n!==undefined){for(var r=-1,i=0,o=n.length;i<o&&-1===r;i++)n[i]===e&&(r=i);0<=r&&n.splice(r,1)}}return this},trigger:function(t,e){var n=this._listeners[t];if(e=e||[],n!==undefined)for(var r,i={},o=0,a=n.length;o<a;o++){r=new u.EventArg(t,i);try{n[o].apply(window,e.concat(r))}catch(s){c('[ERROR] in listener "'+t+'": '+(s.message||s)),Nn.atomReport&&Nn.atomReport({name:"client_listener_error",msg:t})}if(i=r.data,r.removed&&(n.splice(o,1),a=n.length,--o),r.cancelled)break}return this},hasListeners:function(t){return 0<(this._listeners[t]===undefined?0:this._listeners[t].length)}},(u.eventify=function(e,n){var t=u.eventify.methods;n=n||new u;for(var r=0,i=t.length;r<i;r++)!function(t){e[t]=function(){return n[t].apply(n,arguments)}}(t[r]);return n}).methods=["addListener","removeListener","trigger"],(u.EventArg=function(t,e){this.name=t,this.data=e,this.cancelled=!1,this.removed=!1}).prototype={cancel:function(){this.cancelled=!0},remove:function(){this.removed=!0}},window.IronEventManager=u;var s,l,Rn={injectParams:function(t,e){s="us_privacy="+t,l="dnt="+e},send:function(t,e,n){function i(t,e){n&&n(t,e),n=null}var r,o=[];for(r in e)o.push(r+"="+e[r]);s&&(o.push(s),o.push(l));var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState){var t,e=200!==a.status,n=null;if(200===a.status){try{t=JSON.parse(a.responseText)}catch(r){e=!0}t?null!=t.status&&1!=t.status?e=t:n=t:e=!0}i(!0===e?{status:-100}:e,n)}},a.addEventListener("error",i),a.addEventListener("abort",i),a.open("POST",t,!0),window&&window.location&&("127.0.0.1"===window.location.hostname||"localhost"===window.location.hostname)||(a.withCredentials=!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(o.join("&"))},pixel:function(t,e){function n(){e&&e(),e=null}s&&(t+=-1===t.indexOf("?")?"?":"&",t+=s,t+="&"+l);var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&n()},r.addEventListener("error",n),r.addEventListener("abort",n),r.open("GET",t,!0),r.send(null)},jsonp:function(t,e){var n=function n(){},r=e.success||n,i="cb_"+d()+"_"+d()+"_"+d(),o=window.setTimeout(function(){r()},3e3);window[i]=function(t){window.clearTimeout(o),r(t)};var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.onerror=e.error||n;i=t+(-1===t.indexOf("?")?"?":"&")+"callback="+i;s&&(i+="&"+s+"&"+l),a.src=i,(document.head||document.getElementsByTagName("head")[0]||document.body).appendChild(a)}};function d(){return Math.floor(1e5*Math.random())+1e6}var a=function a(n){var t=!1,r=new IronEventManager;this.name="",this.EVENTS={SCRIPT_LOADED:"scriptLoaded",IMPRESSION:"impression",CLICK:"click",COMPLETION:"completion",VIDEO_STARTED:"videoStarted",VIDEO_COMPLETED:"videoCompleted",NO_CAMPAIGNS:"no_campaigns",AD_BLOCK:"ad_block",AD_EXPIRED:"adExpired",IMPRESSION_ERR:"impression_err"},this.addListener=function(t,e){r.addListener(t,function(){e()})},this.trigger=function(t){r.trigger(t)},this.getName=function(){return this.name},this.scriptLoaded=function(){t=!0,this.trigger(this.EVENTS.SCRIPT_LOADED)},this.isScriptLoaded=function(){return t},this.isAdAvailable=function(){},this.setDataParam=function(t,e){n&&n.data&&(n.data[t]=e)}},Ln={},w="ins",_="rv",S="is",E=function E(c){var u=this;a.call(this),this.name="epom";var s=[],t=!1;u.adContent="",u.adExtra=null,u.expireAdHandler=null,u.isScriptLoaded=!1;var l=1e4,d=function d(t){Pn.DEBUG&&window.console&&window.console.log&&console.log(t)},o=function o(t){var e={pub_id:c.data.pubId,app_key:c.data.appKey,user_id:c.data.userId,device_id:c.data.deviceId,session_id:c.data.sessionId,impression_id:c.data.impressionId,sdk_version:c.data.sdkVersion,ip:c.data.ip,browser:c.data.browser,os:c.data.os},n=!1;if(c.data.rewardId&&(e.reward_id=c.data.rewardId),c.data.rewardName&&(e.reward_name=c.data.rewardName),c.data.rewardCount&&(e.reward_count=c.data.rewardCount),c.data.rewardTimeStamp&&(e.reward_timestamp=c.data.rewardTimeStamp),c.data.rewardSignature&&(e.reward_signature=c.data.rewardSignature),c.data.mobilePublisherId&&(e.mobile_publisher_id=c.data.mobilePublisherId),c.data.impressionCustomParams)for(i in c.data.impressionCustomParams)n||(n=!0,e.custom=1),e["cstm_"+i]=c.data.impressionCustomParams[i];var r=[];for(i in e)r.push(i+"="+(e[i]||""));if((n={"cp.page_url":c.data.pageUrl,"cp.width":c.data.containerWidth,"cp.height":c.data.containerHeight,"cp.dyn":r.join("&"),"cp.dynamic_parameter":"","cp.ip":c.data.ip,"cp.lon":"","cp.lat":"","cp.tt":c.data.tt,"cp.app_name":c.data.appName,"cp.reward_id":c.data.rewardId,"cp.plid":c.data.epomPubId,"cp.impid":c.data.impressionId,"cp.cplid":(c.data.cc||"AA")+"_"+c.data.epomPubId})["cp.targeting"]=c.data.adUnit||"",t)for(var i in t)n["cp."+i]=t[i];return n};function p(t){t=t.replace(/\{\{ISRV_USER_ID\}\}/g,c.data.userId),c.data.storeId&&(t=t.replace(/\{\{ISRV_STORE_ID\}\}/g,c.data.storeId));var e=c.data.adUnit===w?S:_;return t=t.replace(/\{AD_UNIT\}/g,e),c.data.privacy&&(t=(t=t.replace(/\{\{ISRV_US_PRIVACY\}\}/g,c.data.privacy)).replace(/\{\{ISRV_DNT\}\}/g,c.data.dnt)),t}var h=function h(){u.isScriptLoaded=!1;var t=document.createElement("iframe");t.id="epom-tag-container-iframe",t.width=c.data.containerWidth,t.height=c.data.containerHeight,t.frameBorder=0,t.scrolling="no",t.seamless="seamless",An("#"+c.containerID).append(t);var e="<style>body{ margin: 0; }</style>"+p(u.adContent);null!=u.adExtra&&(e="<script>window.isrv_extra='"+JSON.stringify(u.adExtra)+"'<\/script>"+e),f(An(t).get(0),e)};var f=function f(t,e){var n=t.contentWindow,r=n.document;r.open("text/html","replace"),i()<=9?(r.close(),n.contents=e,t.src='javascript:window["contents"]'):(r.write(e),r.close())},i=function i(){var t,e=-1;return"Microsoft Internet Explorer"==navigator.appName?(t=navigator.userAgent,null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(t=navigator.userAgent,null!=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))),0<e?e:NaN},e=function e(){u.isScriptLoaded&&u.trigger(u.EVENTS.IMPRESSION)},m=function m(t){var e=t.beacon,n={};try{var r=e.match(/b=([\d]+)/);n.bannerId=r?r[1]:null}catch(a){}try{var i=e.match(/c=([\d]+)/);n.campaignId=i?i[1]:null}catch(a){}try{var o=e.match(/p=([\d]+)/);n.placementId=o?o[1]:null}catch(a){}return n.singleFrameAd=g(t.code),n};function r(t){var e,n,r=[];for(e in t)if(n=t[e],Array.isArray?Array.isArray(n):n instanceof Array)for(var i in t[e])r.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e][i]));else r.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return r.join("&")}function v(t,e,n){d(t+" "+e),Nn.atomReport&&Nn.atomReport({name:t,msg:e},"is.video_webrv_logs",n)}function n(t){var e=o(t.custom),n={key:t.key||c.data.epomSiteId,format:"JSONP","cookie-policy":2,clientIp:c.data.ip,requestUrl:c.data.pageUrl};return s.length&&(n.excluded=s),t.excluded&&(n.excluded||(n.excluded=[]),n.excluded=n.excluded.concat(t.excluded)),function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}(n,e),"https://adsrveys.com/ads-api-v3?"+r(n)}function g(t){return/data-availability="true"/gi.test(t)}function y(){var t=document.getElementById("epom-tag-container-iframe");t&&t.parentNode.removeChild(t)}function b(n,r){var e,i,o,a,t=u.adContent.match(/<script type="availability"[^>]*>([\s\S]+?)<\/script>/gi),s=null!=t&&t.length&&0<t.length;n.singleFrameAd?(v("single_frame_availability_test","",n),e=function e(t){t&&t.data&&t.data.isrv&&"availability"==t.data.event&&(i&&clearTimeout(i),v("single_frame_availability_test_result",t.data.status,n),window.removeEventListener("message",e,!1),t.data.status||y(),u.adExtra=t.data.extra||null,r&&r(t.data.status))},i=setTimeout(function(){v("single_frame_availability_test_result","to",n),window.removeEventListener("message",e,!1),y(),r&&r(!1)},l),An("#epom-tag-container-outer").html("<div id='epom-tag-container-overlay'></div><div id='epom-tag-container'></div>"),window.addEventListener("message",e,!1),h()):s?(v("availability_test","",n),s=(s=t[0]).replace('type="availability"',""),o=function o(t){var e;t&&t.data&&t.data.isrv&&"availability"==t.data.event&&(clearTimeout(a),v("availability_test_result",t.data.status,n),window.removeEventListener("message",o,!1),(e=document.getElementById("epom-tag-container-iframe-availability"))&&e.parentNode.removeChild(e),!0===t.data.status&&(u.adExtra=t.data.extra||null,u.adExtra&&0<u.adExtra.validForSec&&(u.expireAdHandler=setTimeout(function(){u.trigger(u.EVENTS.AD_EXPIRED),u.adContent=null,Ln[c.data.appKey]=null,u.adExtra=null},1e3*u.adExtra.validForSec))),r&&r(t.data.status))},a=setTimeout(function(){v("availability_test_result","to",n),window.removeEventListener("message",o,!1);var t=document.getElementById("epom-tag-container-iframe-availability");t&&t.parentNode.removeChild(t),r&&r(!1)},l),window.addEventListener("message",o,!1),t=s,(s=document.createElement("iframe")).id="epom-tag-container-iframe-availability",s.width=1,s.height=1,s.frameBorder=0,s.scrolling="no",s.style.display="none",s.seamless="seamless",s.sandbox="allow-forms allow-pointer-lock allow-scripts allow-same-origin",An("body").append(s),f(An(s).get(0),p(t))):r&&r(!0)}this.addListener(this.EVENTS.SCRIPT_LOADED,function(){t&&(t=!1,u.play())}),this.setDataParam=function(t,e){c&&c.data&&(c.data[t]=e)},this.play=function(){u.expireAdHandler&&(clearTimeout(u.expireAdHandler),u.expireAdHandler=null),Ln[c.data.appKey]=null,u.adContent?(g(u.adContent)?document.getElementById("epom-tag-container-iframe").contentWindow.postMessage({isrv:!0,event:"startAd"},window.location.origin):h(),u.isScriptLoaded=!0,e()):u.trigger(u.EVENTS.IMPRESSION_ERR)},this.isAdAvailable=function(r,i,o){var a=this;i?i++:(a.adContent=null,a.adExtra=null,a.expireAdHandler=null,i=1);var t=Ln[c.data.appKey];t?(a.adContent=t.data.code,a.adExtra=t.adExtra,a.adExtra.singleFrameAd&&(An("#epom-tag-container-outer").html("<div id='epom-tag-container-overlay'></div><div id='epom-tag-container'></div>"),h()),t=m(t.data),r&&r(!0,t,a.adExtra)):(d("epom test, is ad available?"),Rn.jsonp(n(o||{}),{error:function(t,e,n){d({message:"epom test error",error:n.message||n}),i<10?a.isAdAvailable(r,i,o):(d("No ad available - error"),r&&r(!1,{reason:[a.name,(n=n)&&n.message&&-1<n.message.indexOf("not called")?"cb_not_called":n,t.status].join("_")}))},success:function(e){var n;e&&e.success&&e.code?(n=m(e),a.adContent=e.code,b(n,function(t){t?(s.length=0,a.adExtra||(a.adExtra={}),a.adExtra.singleFrameAd=n.singleFrameAd,Ln[c.data.appKey]={data:e,adExtra:a.adExtra},r&&r(t,n,a.adExtra)):(s.push(n.bannerId),i<10?a.isAdAvailable(r,i,o):(d("No ad available"),r&&r(!1)))})):(d("epom test, no ad"),d("No ad available"),r&&r(!1))}}))}};E.prototype=Object.create(a.prototype);var xn=function xn(t){var n,r=new IronEventManager,e={url:t.url,containerID:t.containerID,data:t.data};switch(t.player){case xn.PLAYER_STREAMRAIL:n=new Streamrail(e);break;case xn.PLAYER_EPOM:n=new E(e)}return n&&(n.addListener(n.EVENTS.IMPRESSION,function(){r.trigger(n.EVENTS.IMPRESSION)}),n.addListener(n.EVENTS.CLICK,function(){r.trigger(n.EVENTS.CLICK)}),n.addListener(n.EVENTS.COMPLETION,function(){r.trigger(n.EVENTS.COMPLETION)}),n.addListener(n.EVENTS.AD_EXPIRED,function(){r.trigger(n.EVENTS.AD_EXPIRED)}),n.addListener(n.EVENTS.VIDEO_STARTED,function(){r.trigger(n.EVENTS.VIDEO_STARTED)}),n.addListener(n.EVENTS.VIDEO_COMPLETED,function(){r.trigger(n.EVENTS.VIDEO_COMPLETED)}),n.addListener(n.EVENTS.NO_CAMPAIGNS,function(){r.trigger(n.EVENTS.NO_CAMPAIGNS)}),n.addListener(n.EVENTS.AD_BLOCK,function(){r.trigger(n.EVENTS.AD_BLOCK)}),n.addListener(n.EVENTS.IMPRESSION_ERR,function(){r.trigger(n.EVENTS.IMPRESSION_ERR)})),{getPlayer:function(){return n},addListener:function(t,e){r.addListener(t,function(){e()})},play:function(){n.play()},isAdAvailable:function(t,e){n.isAdAvailable(t,null,e)},setDataParam:function(t,e){n.setDataParam(t,e)},getPlayerName:function(){return n?n.getName():""}}};xn.PLAYER_EPOM="epom",xn.PLAYER_STREAMRAIL="streamrail";var e,n,Nn=function(){var Le,xe,Ne="ins",r=["100","YNN"],De={SESSION_CREATE:Pn.API_PATH+"/api/createSession",IMPRESSION_CREATE:Pn.API_PATH+"/api/createImpression",IMPRESSION:Pn.API_PATH+"/api/reportImpression",COOKIE_SYNC:"https://cs.rtb-seller.com/list",EPOM_API:"https://adsrveys.com/ads-api-v3"},Me="is.video_webrv_logs",je="brands_Webrv_quick_logs",He="error",Be="error_usage",Ue="event_error",Ve="session_req",qe="session",ze="click_event",Fe="impr_req",Ge="impr",Xe="impr_passback",Ke="impr_timeout",We="impr_close",Je="attribution",Ye="no_ad_available",$e="ad_available",Qe="ad_block",Ze="ad_expired",tn="no_fill_limit",en="no_fill_limit_clear",nn="pusher",rn="pusher_cleared",on="ad_extra_campaign_after_error",an="ad_backfill_campaign_after_error",sn="ad_backfill_response",cn="ad_backfill_NO_INSTANCE",un="ad_available_timing",ln="ad_backfill_timing",dn=0,pn=-1,hn=-2,fn=1,mn=2,vn={READY:"ready",OPEN:"open",CLOSE:"close",IMPRESSION:"impression",CLICK:"click",NO_CAMPAIGNS:"no_campaigns",AD_BLOCK:"ad_block",COMPLETION:"completion",RESIZE:"resize",VIDEO_STARTED:"videoStarted",VIDEO_COMPLETED:"videoCompleted",INIT_ERROR:"initError",AD_EXPIRED:"adExpired",IMPRESSION_ERR:"impression_err"},gn="sess_rejected",yn="no_ids",bn="impr_rejected",wn="impr_error",_n="sess_no_fill",Sn="Setup problem. Please contact your account manager.",En="Setup problem. Please contact your account manager.",Tn={ERROR_MESSAGE:"We're out of offers to show in your region<br>Please try again later<br><br>Plenty of more offers are waiting for you just a click away"},On=!1,Cn={};function In(){try{return window.localStorage}catch(t){return}}var kn=function kn(t){for(var e=t.substring(1),n=0;n<r.length;n++)if(r[n]===e)return 0;return 1};function b(t,e,n,r,i,o,a,s,c,u,l,d,p,h,f,m,v,g,y,b){var w,_,S=t,E=e,T=n,O=b,C=v,I=!0===g&&"1",k=r,P=i,A=o,R=a,L=s,x=u,N=p,D={},M=h,j=y,H=m,B=null,U=null,V=null,q=null,z=null,F=null,G=null,X=null,K=null,W=null,J=null,Y=null,$={},Q=null,Z=0,tt=0,et=0,nt=!1,rt=!1,it=null,ot=null,at=null,st=null,ct=null,ut=null,lt={},dt=(new Date).getTime(),pt=null,ht=null,ft=null,mt=null,vt=null,gt=null,yt=!0,bt=function bt(){var t;!rt&&Pt&&nt&&(rt=!0,null!=It&&(t=new Date-It.getTime(),t=Math.floor(t/1e3)),te({name:ze,msg:t},Me))};function wt(){return(((new Date).getTime()-dt)/1e3).toFixed(2)}function _t(){dt=(new Date).getTime()}_=null!=l&&500<=+l&&+l<=1920&&null!=d&&280<=+d&&+d<=1080?(w=l,d-51):(w=704,396);var St=new IronEventManager,Et=null,Tt=null,Ot=null,Ct=dn,It=null,kt=!1,Pt=!1,At=!1,Rt=!1,Lt=!1,xt=null,Nt=null,Dt=null,Mt=null,jt=null,Ht=null,Bt=!1,Ut=0,Vt=null,qt={};null!=k&&null!=P&&null!=A&&null!=R&&(Lt=!0),j&&(vt=kn(j));var m={endpoint:Pn.ATOM_ENDPOINT,auth:Pn.ATOM_AUTH,flushInterval:10,bulkLen:50,bulkSize:20},zt=new IronSourceAtom.Tracker(m),Ft=function Ft(t){Pn.DEBUG&&window.console&&window.console.log&&window.console.log(t)},Gt=function Gt(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var e=Yt(Pn.PREF_EVENT_ID);return null!=e&&""!=e||(e=t()+t(),Jt(Pn.PREF_EVENT_ID,e)),e+"-"+t()+t()},Xt=function Xt(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},Kt=function Kt(){var t=Yt(Pn.PREF_DEVICE_ID);return(null==t||""==t)&&(t=Xt(),Jt(Pn.PREF_DEVICE_ID,t)),t},Wt=function Wt(){var e=function e(t){return t<10&&(t="0"+t),t},t=new Date;return[t.getFullYear(),e(t.getMonth()+1),e(t.getDate())].join("-")+" "+[e(t.getHours()),e(t.getMinutes()),e(t.getSeconds())].join(":")},Jt=function Jt(t,e){try{var n=In();n&&(n[Pn.PREF_PREFIX+"_"+t]=e)}catch(r){}},Yt=function Yt(t){try{if(In())return window.localStorage[Pn.PREF_PREFIX+"_"+t]}catch(e){}return null},$t=function $t(){try{return decodeURIComponent(M||window.location.hostname+window.location.pathname).substr(0,500)}catch(t){return""}},Qt=function Qt(){if(window.navigator&&window.navigator.language)return window.navigator.language.split("-")[0]},Zt=function Zt(t){var e=Qt();if(!qt||!e)return t;e=qt[t]&&qt[t][e];return e||t},te=function te(t,e,n){e=e||Me;function r(t){return n&&n[t]||Mt&&Mt[t]||null}null==t&&(t={}),null==n&&(n={}),t.user_id=T,t.page_url=t.name===Ve?$t():"",t.app_name=q,t.app_key=E,t.device_id=U,t.session_id=G,t.impression_id=X,t.banner_id=r("bannerId")||Nt,t.campaign_id=r("campaignId"),t.placement_id=r("placementId"),t.advertiser_id=Dt,t.sdk_version=Pn.SDK_VER,t.browser=W,t.os=J,t.event_id=V+""+tt,t.datetime=Wt(),tt++,j&&(t.us_privacy=j,t.dnt=vt),Ft(t),Pn.LOG_ATOM&&(zt.track(e,t),zt.flush())},ee=function ee(t){var e={};e.impid=X,e.time_stamp="now",e.component=(Pn.DEBUG?"DEBUG|":"")+t.event;t=t.data||"";"string"!=typeof t&&(t=JSON.stringify(t)),e.message=t,Ft(e),j&&(e.us_privacy=j,e.dnt=vt),Pn.LOG_ATOM&&(zt.track(je,e),zt.flush())};Nn.atomReport=te,Nn.atomDebugReport=ee;var ne=function ne(){function t(t){return Mt&&Mt[t]||null}return{pub_id:S,app_key:E,user_id:T,device_id:U,session_id:G,impression_id:X,sdk_version:Pn.SDK_VER,campaign_id:t("campaignId"),placement_id:t("placementId")}},re=function re(){var t=ne();Rn.send(De.IMPRESSION,t,function(){})},ie=function ie(n){var t=ne();gt&&(t.cp=JSON.stringify(gt),gt=null),Rn.send(De.IMPRESSION_CREATE,t,function(t,e){t||null==e||null==e.impression_id?n(!0):(ut=e.backfillBannerId,X=e.impression_id,Cn[E]&&(Cn[E].impression_id=e.impression_id),e.rewardName&&e.rewardCount&&($.name=e.rewardName,$.count=e.rewardCount),n(!1))})},oe=function oe(r){if(Pt=rt=nt=!1,!pe())return te({name:He,msg:_n},Me),!1;var t={};Q&&(t.custom={adUnit:Q}),it.isAdAvailable(function(t,e,n){(nt=t)?(Mt=e,jt=n,te({name:un,msg:wt()},Me),te({name:$e},Me),Ft("Ready"),Pt=!0,kt&&At&&(Le&&Le.show(),At=!1),St.trigger(vn.READY)):(jt=Mt=null,Pt=At=!1,St.trigger(vn.NO_CAMPAIGNS),e=e&&e.reason,te({name:e?He:Ye,msg:e||""},Me)),r&&r(t)},t)},ae=function ae(){Oe(!1),we();var t={};switch(Ut){case 0:t.excluded=[Nt],te({name:on},Me),Ft("Trying fetch other campaign.");break;case 1:if(!ut)return void _e();t.custom={adserving_force_banner_id:ut},te({name:an},Me),Ft("Trying fetch backfill campaign.");break;default:return void _e()}it.isAdAvailable(function(t,e,n){return Ut++,t?(te({name:ln,msg:wt()},Me),te({name:sn,msg:Ut+"_true"},Me),Mt=e,jt=n,Le?(jt.singleFrameAd||An("#epom-tag-container-outer").html("<div id='epom-tag-container-overlay'></div><div id='epom-tag-container'></div>"),Se(0,0,!0),it.play(),void(Ct=dn)):void te({name:cn},Me)):(te({name:sn,msg:Ut+"_false"},Me),void(Ut<2?ae:_e)())},t)},se=function se(){Ft("Refresh ad"),_t(),it.isAdAvailable(function(t,e,n){Mt=e,jt=n,te({name:t?$e:Ye},Me),Ft("New ad loaded? "+t)})},ce=function ce(t){X=null,t?ue(t):(t=ne(),C&&(t.reward_id=C),Rn.send(De.SESSION_CREATE,t,function(t,e){t?(te({name:He,msg:gn+(t.message||t)},Me),St.trigger(vn.INIT_ERROR),Ft("error "+Sn+" "+(t.message||t))):(ue(e),Cn[E]=e,te({name:qe},Me))}),te({name:Ve},Me))};function ue(t){if(qt=t.ctaTranslations||{},G=t.session_id,K=t.ip,W=t.browser,J=t.os,Y=t.cc,q=t.app_name,Z=I||t.tt,M=M||t.page_url,B=t.publisher_id,z=t.epom_pub_id,F=t.epom_site_id,X=t.impression_id,$.currency=t.currency_name,Q=t.adUnit,Lt?($.name=k,$.count=P):($.name=t.reward_name,$.count=t.reward_count),Nn.TEST_DEBUG&&Nn.test&&(z=Nn.test.epomPubId||z,F=Nn.test.epomSiteId||F,q=Nn.test.appName||q),!z||!F)return St.trigger(vn.INIT_ERROR),te({name:He,msg:yn},Me),void Ft("error "+En);t.style&&fe(t.style),t.params&&me(t.params),le(),function s(e,t){function n(t){e&&e(t),e=null}var r=new XMLHttpRequest;function i(){t?n(!0):s(e,!0)}r.onreadystatechange=function(){if(4===r.readyState){if(200===r.status||204===r.status)return n(!1);t?n(!0):s(e,!0)}},r.addEventListener("error",i),r.addEventListener("abort",i);var o,a=De.EPOM_API;xe&&(o=kn(xe),a+="?us_privacy="+xe+"&dnt="+o),r.open("GET",a,!0),r.send(null)}(function(t){t?(Bt=!0,te({name:Qe},Me),St.trigger(vn.AD_BLOCK)):(_t(),oe())})}var le=function le(){(it=new xn({player:xn.PLAYER_EPOM,containerID:"epom-tag-container",data:{pubId:S,appKey:E,appName:q,userId:T,storeId:O,pageUrl:M,sessionId:G,impressionId:X,deviceId:U,sdkVersion:Pn.SDK_VER,ip:K,browser:W,os:J,cc:Y,tt:Z,epomPubId:z,epomSiteId:F,rewardName:k,rewardCount:P,rewardId:C,rewardTimeStamp:A,rewardSignature:R,impressionCustomParams:L,mobilePublisherId:B,containerWidth:w,containerHeight:_,adUnit:Q,privacy:j,dnt:vt}})).addListener(vn.IMPRESSION,function(){St.trigger(vn.IMPRESSION)}),it.addListener(vn.COMPLETION,function(){St.trigger(vn.COMPLETION)}),it.addListener(vn.VIDEO_STARTED,function(){}),it.addListener(vn.VIDEO_COMPLETED,function(){}),it.addListener(vn.NO_CAMPAIGNS,function(){St.trigger(vn.NO_CAMPAIGNS)}),it.addListener(vn.AD_EXPIRED,function(){Ft("Ad expired"),te({name:Ze},Me),se()}),it.addListener(vn.IMPRESSION_ERR,function(){clearTimeout(Et),Ct=pn,te({name:He,msg:wn},Me),_e()})},de=function de(){var t;++et>=Pn.NO_FILL_COUNT&&((t=In())&&(Ft("Set no fill timestamp"),t.setItem(Pn.LOCAL_STORAGE_NO_FILL,(new Date).getTime()),St.trigger(vn.NO_CAMPAIGNS),te({name:tn},Me)))},pe=function pe(){var t=In();if(t){var e=t.getItem(Pn.LOCAL_STORAGE_NO_FILL);if(e)return((new Date).getTime()-e)/1e3/60>Pn.NO_FILL_MINUTES?(t.removeItem(Pn.LOCAL_STORAGE_NO_FILL),Ft("Remove no fill timestamp"),te({name:en},Me),!0):(St.trigger(vn.NO_CAMPAIGNS),!1)}return!0},he=function he(t){var e,n,r,i,o,a;t&&t.data&&t.data.isrv&&"availability"!=t.data.event&&(clearTimeout(Et),Ft(t.data),e=t.data.event,n=t.data.bannerTxt,xt=t.data.rewardPixels,Nt=t.data.banner,Dt=t.data.advertiser,r=t.data.containerWidth,i=t.data.containerHeight,ht=t.data.allowFullscreen,(r&&i||Ce())&&Se(r,i),"impression"==e?(Ct=fn,An(".ironrv-container #epom-tag-container-overlay").hide(),re(),o=new Date-It.getTime(),a=Math.floor(o/1e3),te({name:Ge,msg:a},Me),x.enforceTitle||(ve(!1,n),yt=!0)):"ad-passback"==e?(Ct=pn,o=new Date-It.getTime(),a=Math.floor(o/1e3),te({name:Xe,msg:a},Me),de(),ae()):"attribution"==e?(o=new Date-It.getTime(),a=Math.floor(o/1e3),te({name:Je,msg:a},Me)):"ad-error"==e?(a=t.data.msg,Ft(t),te({name:He,msg:a},Me)):"hide-close-btn"==e?t.data.hideCloseBtn&&(An(".ironrv-container .ironrv-close").hide(),clearTimeout(Ot)):"schedule-close-btn"==e?t.data.timeout&&Ie(t.data.timeout):"complete"==e?t.data.showCloseBtn&&Oe(mt):"onclose"==e?be():"add-tooltip"==e?ge(t.data.tooltip):"remove-tooltip"==e?ye(t.data.tooltipType):(Ft(t),te({name:Ue,msg:e},Me)))},fe=function fe(e){function t(t,e){var n;t.css&&(!t.restrictions||(n=t.restrictions.maxApplyWidth)&&w<=n)&&r(An(e),t.css)}function r(t,e){for(var n in e)e.hasOwnProperty(n)&&t.css(n,e[n])}e.src&&An(function(){var t='<link rel="stylesheet" type="text/css" href="'+e.src+'">';An("head").append(t)}),e.container&&e.container.css&&(D=e.container.css,r(An(".ironrv-container"),e.container.css)),e.header&&(e.header.css&&r(An(".ironrv-container-header"),e.header.css),An(".ironrv-container-header.complete").css("background-color","#f8136f")),e.footer&&e.footer.css&&r(An(".ironrv-container-header"),e.header.css),Q!==Ne&&(e.logo&&An(".ironrv-title-logo").css("background-image","url('"+e.logo.src+"')"),e.closeBtn&&t(e.closeBtn,".ironrv-close"),e.ironrvTitle&&t(e.ironrvTitle,".ironrv-title"))},me=function me(t){t.closeTimeout&&(ct=Number(t.closeTimeout)),t.closeBtnDelayOnReward&&(mt=Number(t.closeBtnDelayOnReward)),t.fullscreen&&(pt=Boolean(t.fullscreen)),t.closeBtnOnReward&&(ft=Boolean(t.closeBtnOnReward))},ve=function ve(t,e,n){var r;Q!==Ne&&(t?(An(".ironrv-container-header").addClass("complete"),r=x.rewardTitle||"You can now claim your reward!",An(".ironrv-title").html('<span class="ironrv-complete-text">'+Zt(r)+"</span>")):(An(".ironrv-container-header").removeClass("complete"),n?An(".ironrv-title").html(""):(n=""!=$.count&&""!=$.count?$.count.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):"",null==e||""==e?x.title?(r=x.title,r=(r=Zt(r)).replace(/{REWARD}/gi,"<b>"+n+"</b> "+$.name),An(".ironrv-title").html(r)):An(".ironrv-title").html("Complete the offer and earn <b>"+n+"</b> "+$.name):(e=(e=Zt(e)).replace(/{REWARD}/gi,"<b>"+n+"</b> "+$.name),An(".ironrv-title").html(e),An(".ironrv-title").hide(),An(".ironrv-title").fadeIn()))))},ge=function ge(t){if(t&&t.text&&t.type){var e;switch(t.location){case"top-left":e="ironv-tooltip-top-left";break;case"top-right":e="ironv-tooltip-top-right";break;case"middle-left":e="ironv-tooltip-middle-left";break;case"middle-right":e="ironv-tooltip-middle-right";break;case"bottom-left":e="ironv-tooltip-bottom-left";break;case"bottom-right":e="ironv-tooltip-bottom-right";break;default:e="ironv-tooltip-top-left"}var n=An('<div class="ironv-tooltip '+e+'">'+t.text+"</div>");An(".ironrv-container").append(n.get()),n.fadeIn(),lt[t.type]=n,t.duration&&setTimeout(function(){n.fadeOut(),n.remove(),delete lt[t.type]},1e3*t.duration)}},ye=function ye(t){var e;!t||(e=lt[t])&&(e.fadeOut(),e.remove(),delete lt[t])},be=function be(){var t;N||(An(".ironrv-container").css("top","50px"),An(".ironrv-container").css("margin-left","-352px"),An(".ironrv-container").css("width","704px"),An(".ironrv-container").removeClass("ironrv-fullscreen")),An("#epom-tag-container-outer").css("height",null),An("#epom-tag-container-outer").css("width",null),clearTimeout(Et),Rt&&(An(".ironrv-bg").fadeOut(),An(".ironrv-container").fadeOut(),An("#epom-tag-container-outer").html("<div id='epom-tag-container-overlay'></div><div id='epom-tag-container'></div>"),An("#title-wrapper").html(""),Rt=!1,St.trigger(vn.CLOSE),null!=It&&(t=new Date-It.getTime(),t=Math.floor(t/1e3),te({name:We+"_"+Ct,msg:t},Me)),Dt=Nt=null,X=null,nt=!1,_t(),ie(function(t){t?te({name:He,msg:bn},Me):(it.setDataParam("impressionId",X),oe())}))},we=function we(){for(var t="",e=1;e<=5;e++)t+='<div class="ironrv-r ironrv-r0'+e+'"></div>';An(".ironrv-container #epom-tag-container-overlay").html('<div class="ironrv-loader"><div class="ironrv-loader-wrapper">'+t+'</div><div class="ironrv-loading-texts"><div class="ironrv-text ironrv-text01">Loading Reward...</div><div class="ironrv-text ironrv-text02">Looking For An Offer...</div><div class="ironrv-text ironrv-text03">Please Wait...</div></div></div>'),An(".ironrv-container #epom-tag-container-overlay").show()},_e=function _e(){An(".ironrv-container #epom-tag-container").html(""),An(".ironrv-container #epom-tag-container-overlay").html("<div class='ironrv-error'><span class='smiley-sad'>:(</span><br><br><br><br>"+Tn.ERROR_MESSAGE+"</div>"),An(".ironrv-container #epom-tag-container-overlay").show(),Oe(!1)},Se=function Se(t,e,n){t=t||w,e=e||_,n&&(t=704,e=396);var r=An.height();N||(D.top||(r=r<e?0:50,An(".ironrv-container").css("top",r+"px")),250<=t&&An(".ironrv-container").css("margin-left",t/2*-1+"px")),250<=t&&(An(".ironrv-container").css("width",t+"px"),An("#epom-tag-container-iframe").css("width",t+"px")),250<=e&&(An("#epom-tag-container-outer").css("height",e+"px"),An("#epom-tag-container-iframe").css("height",e+"px")),Ce()&&!n&&(t=(n=An(".ironrv-bg")).width(),e=n.height(),An(".ironrv-container").css("top",null),An(".ironrv-container").css("margin-left",null),An(".ironrv-container").css("width",null),An(".ironrv-container").addClass("ironrv-fullscreen"),N||(An("#epom-tag-container-iframe").css("height","100%"),An("#epom-tag-container-iframe").css("width","100%"),An("#epom-tag-container-outer").css("height","100%"),An("#epom-tag-container-outer").css("width","100%")));e={width:t,height:e};St.trigger(vn.RESIZE,[e])},Ee=function Ee(){var t;t={iframeMouseOver:!1},window.addEventListener("blur",function(){t.iframeMouseOver&&bt()}),window.focus(),An(".ironrv-container #epom-tag-container").on("mouseover","iframe",function(){t.iframeMouseOver=!0}),An(".ironrv-container #epom-tag-container").on("mouseout","iframe",function(){t.iframeMouseOver=!1})};An(function(){var t=An("div.ironrv-bg");t.length&&0<t.length&&(An("div.ironrv-bg").remove(),An("div.ironrv-container").remove()),An("body").append('<div class="ironrv-bg"></div><div class="ironrv-container" style="display:none"><div id="title-wrapper"></div><div id="epom-tag-container-outer"><div id="epom-tag-container-overlay"></div><div id="epom-tag-container"></div></div><div class="ironrv-container-footer"><div class="ironrv-footer"></div></div></div></div>'),N&&An("#"+N).append(An(".ironrv-container").get()),kt=!0}),U=Kt(),V=Gt(),j&&Rn.injectParams(j,vt),window.addEventListener("message",he,!1),ce();var Te=null;function Oe(t){t?setTimeout(Oe,t,!1):(Te&&(clearInterval(Te),Te=null),Q===Ne?(An(".ironrv-container .ironrv-close").addClass("ironrv-close-ins-cross-btn"),An(".ironrv-container .ironrv-close").html("x"),An(".ironrv-container .ironrv-close").click(be)):An(".ironrv-container .ironrv-close").fadeIn())}function Ce(){return ht&&(pt||H)}function Ie(t){if(clearTimeout(Ot),Q===Ne)return e=t,Te&&clearInterval(Te),Vt=e,An(".ironrv-container .ironrv-close").unbind("click",be),An(".ironrv-container .ironrv-close").html(Vt),An(".ironrv-container .ironrv-close").fadeIn(),void(Te=setInterval(function(){return 0<Vt?(An(".ironrv-container .ironrv-close").html(Vt),void Vt--):(Vt=0,clearInterval(Te),Te=null,void Oe(mt))},1e3));var e;ft&&t<Pn.CLOSE_BUTTON_TIMEOUT&&(t=Pn.CLOSE_BUTTON_TIMEOUT),An(".ironrv-container .ironrv-close").hide(),Ot=setTimeout(function(){An(".ironrv-container .ironrv-close").fadeIn()},1e3*t)}var ke=function ke(){e=x.skipText?(n="Skip","skip"):(n="X","");var t=Q!==Ne,e='<div class="ironrv-close '+e+(t?"":"ironrv-close-inner")+'">'+n+"</div>",n='<div class="ironrv-container-header"><div class="ironrv-title-logo"></div><div class="ironrv-title"></div>'+e+"</div>";An("#title-wrapper").append(t?n:e),t&&An(".ironrv-container .ironrv-close").click(be)},Pe=function Pe(){var t,e;Rt||(ke(),!C||C&&yt?ve(!1):ve(!1,null,!0),we(),Dt=Nt=xt=null,e=Q===Ne?Pn.CLOSE_BUTTON_TIMEOUT_INTERSTITIAL:Pn.CLOSE_BUTTON_TIMEOUT,0<f&&f<=30&&(e=f),0<ct&&(e=ct),e&&Ie(e),An(".ironrv-container").removeClass("open"),An(".ironrv-container .ironrv-close").removeClass("ironrv-close-ins-cross-btn"),Ee(),N?(An(".ironrv-container").addClass("custom-container"),null!=l&&null!=d||(t=An("#"+N).width(),e=An("#"+N).height(),0!=t&&0!=e&&(w=t,_=e-51)),Se(),An(".ironrv-container").show("inline-block")):(An(".ironrv-bg").show(),An(".ironrv-container").show()),An(".ironrv-container").addClass("open"),setTimeout(function(){Se()},1),Nn.TEST_DEBUG&&Nn.test&&(z=Nn.test.epomPubId,F=Nn.test.epomSiteId,q=Nn.test.appName),Rt=!0)},Ae=function Ae(){if(Rt||At)te({name:Be,msg:"wrong_usage_show"},Me);else{if(Ut=0,!Pt||!nt)return Ft("Not Ready"),te({name:Be,msg:"not_ready"},Me),void(At=!0);var t;On||(t="<style>"+Pn.BASE_STYLES+"</style>",An("head").append(t)),Pe(),ie(function(t){return t?(te({name:He,msg:bn},Me),void _e()):(null==ot&&(ot=new Pusher("df761e5b65457f1a1cb1",{encrypted:!0}),st=ot.subscribe(G),at=null,st.bind("complete",function(t){var e;null!=It&&(e=new Date-It.getTime(),e=Math.floor(e/1e3)),Ct=mn,te({name:nn,msg:e},Me),St.trigger(vn.COMPLETION),Ot&&clearTimeout(Ot),ve(!0),Nn.TEST_DEBUG&&t.params&&Nn.test&&Nn.test.onComplete&&Nn.test.onComplete.apply(this,new Array(t.params));try{if(xt&&Array.isArray(xt))for(var n=0;n<xt.length;n++)Rn.pixel(xt[n])}catch(r){}Oe(mt)}),jt&&jt.uniqueId&&(Ht=jt.uniqueId,(at=ot.subscribe(String(Ht))).bind("server-complete",function(){An("iframe").get().contentWindow.postMessage({isrv:!0,event:"server-complete"},window.location.origin)})),Tt=setTimeout(function(){null!==ot&&(null!==st&&st.unbind(),null!==at&&at.unbind(),ot.unsubscribe(G),Ht&&ot.unsubscribe(Ht),ot=null),te({name:rn},Me)},1e3*Pn.PUSHER_CLEAR_TIMEOUT)),It=new Date,Et=setTimeout(function(){Re(),Ct=hn,_e(),te({name:Ke},Me)},1e3*Pn.OFFER_TIMEOUT),te({name:Fe},Me),it.play(),Ct=dn,void St.trigger(vn.OPEN))})}},Re=function Re(){null!==ot&&(null!==st&&st.unbind(),null!==at&&at.unbind(),ot.unsubscribe(G),Ht&&ot.unsubscribe(Ht),Tt&&clearTimeout(Tt),ot=null)};return{updateParams:function(t){L=t;var e=gt&&gt.reward_id;gt=t,e&&(gt.reward_id=e),it&&it.setDataParam("impressionCustomParams",L)},register:function(){},isReady:function(){return Pt},isVisible:function(){return Rt},getRewardCount:function(){return $?$.count:""},updateRewardId:function(t){t&&t!==C&&(C=t,yt=!1,it.setDataParam("rewardId",t),(gt=gt||{}).reward_id=t)},updateAppKey:function(t){t&&t!==E&&(E=t,it.setDataParam("appKey",t),t=Cn[E],ce(t),Re())},hide:function(){setTimeout(function(){be()},1e3*Pn.HIDE_PLAYER_TIMEOUT)},destroy:function(){for(var t in vn)St.removeListener(vn[t]);window.removeEventListener("message",he,!1),Ln={},Cn={}},showAdBlockMessage:function(){Bt&&(An(".adblock-message").length?An(".adblock-message").fadeIn():(An("body").append('<div class="adblock-message"><div class="adblock-message-container"><div class="adblock-message-icon"></div><div class="adblock-message-title">Ad-Blocker Detected</div><div class="adblock-message-desc">We\'ve detected that you\'re using an ad blocker software.<br>please disable it and refresh the page.<br> Thank You!</div><div class="ironrv-close">X</div></div></div>'),An(".adblock-message .ironrv-close").click(function(){An(".adblock-message").fadeOut()})))},show:Ae,addListener:function(t,e){St.addListener(t,function(t){e&&e(t)})},removeListener:function(t,e){St.removeListener(t,e)}}}return{TEST_DEBUG:!1,EVENTS:{INIT_ERROR:vn.INIT_ERROR,READY:vn.READY,OPEN:vn.OPEN,RESIZE:vn.RESIZE,CLOSE:vn.CLOSE,IMPRESSION:vn.IMPRESSION,NO_CAMPAIGNS:vn.NO_CAMPAIGNS,AD_BLOCK:vn.AD_BLOCK,COMPLETION:vn.COMPLETION,VIDEO_COMPLETE:vn.VIDEO_COMPLETED},getInstance:function(t){var e=t.publisherId,n=t.applicationKey,r=t.applicationUserId,i=t.storeId,o=t.itemName,a=t.itemCount,s=t.itemTimestamp,c=t.itemSignature,u=t.pubCustomParams,l=t.containerWidth,d=t.containerHeight,p=t.containerId,h=t.pageUrl,f=t.closeButtonShowTime,m=t.rewardId,v=t.liveModeTest;xe=t.privacy;var g=t.allowFullscreen,y=t.reload,t=(t.developerMode,{title:t.title,rewardTitle:t.rewardTitle,enforceTitle:t.enforceTitle,skipText:t.skipText});if(An(function(){var t=Pn.STATIC_PATH+"/style.css",e=An("head").get(),n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,e.appendChild(n),n.onload=function(){!function(t){try{if(t.sheet.cssRules&&!t.sheet.cssRules.length)return;On=!0}catch(e){}}(n)}}),n&&""!=n&&r&&""!=r)return!y&&Le||(Le&&(Le.destroy(),Le=null),Le=b(e,n,r,o,a,s,c,u,0,t,l,d,p,h,f,g,m,v,xe,i)),Le}}}();return 1!=window.SSA_CORE_SDK_LOADED?(window.SSA_CORE_SDK_LOADED=!0,n=function(){var i,o,a=!1,s=!1;window.ironrv_created=!1,window.ironrv_appKey="",window.ironrv_userId="";var c=function c(){return o={bannerId:"27832",offerId:"7382",completed:!1,callToAction:"",rewards:""}},u=function u(){var t,e=null;if(window.ssa_json)for(t in window.ssa_json)t.toLowerCase().match("custom_")&&(null==e&&(e={}),e[t]=window.ssa_json[t]);return e};return{triggerIsReady:function(){i&&i.isReady()&&window.ssa_json.onCampaignsReady&&(o=c(),i&&(o.rewards=i.getRewardCount()),window.ssa_json.onCampaignsReady.apply(this,new Array([o])))},start:function(){window.ssa_json&&(window.ironrv_created&&window.ironrv_appKey==window.ssa_json.applicationKey&&window.ironrv_userId==window.ssa_json.applicationUserId||this.init(!0))},close:function(){},init:function(n){var r=this;An(function(){var t,e;window.ssa_json&&(e={publisherId:"1728328",applicationKey:(t=window.ssa_json).applicationKey,applicationUserId:t.applicationUserId,itemName:t.itemName,itemCount:t.itemCount,itemTimestamp:t.timestamp,itemSignature:t.itemSignature,containerWidth:t.width,containerHeight:t.height,containerId:t.containerId,pageUrl:t.pageUrl,reload:!!n,developerMode:!1,title:t.title,rewardTitle:t.rewardTitle,skipText:t.skipText,pubCustomParams:u()},i=Nn.getInstance(e),window.ironrv_created=!0,i&&(window.ironrv_appKey=t.applicationKey,window.ironrv_userId=t.applicationUserId,i.addListener(Nn.EVENTS.READY,function(){window.ssa_json.onCampaignsReady&&(o=c(),i&&(o.rewards=i.getRewardCount()),window.ssa_json.onCampaignsReady.apply(this,new Array([o])))}),i.addListener(Nn.EVENTS.OPEN,function(){window.ssa_json.onCampaignOpen&&(i&&o&&(o.rewards=i.getRewardCount()),window.ssa_json.onCampaignOpen.apply(this,new Array(o)))}),i.addListener(Nn.EVENTS.CLOSE,function(){window.ssa_json.onCampaignClose&&window.ssa_json.onCampaignClose.apply(this,new Array(o))}),i.addListener(Nn.EVENTS.NO_CAMPAIGNS,function(){window.ssa_json.onCampaignsDone&&window.ssa_json.onCampaignsDone.apply(this,new Array([]))}),i.addListener(Nn.EVENTS.IMPRESSION,function(){}),i.addListener(Nn.EVENTS.AD_BLOCK,function(){window.ssa_json.onAdBlockDetected&&window.ssa_json.onAdBlockDetected.apply(this,new Array)}),i.addListener(Nn.EVENTS.COMPLETION,function(){window.ssa_json.onCampaignCompleted&&(o&&(o.completed=!0),i&&o&&(null==o.rewards||""==o.rewards)&&(o.rewards=i.getRewardCount()),window.ssa_json.onCampaignCompleted.apply(this,new Array(o)))}),a=!0,s&&r.BrandConnect.engage()))})},BrandConnect:{engage:function(){An(function(){a&&i?i.show():s=!0})},close:function(){},showAdBlockMessage:function(){i.showAdBlockMessage()}}}}(),(window.SSA_CORE_BACKUP=n).init()):(n=window.SSA_CORE_BACKUP)&&n.triggerIsReady(),window.SSA_CORE=n,e=window,n=function(){return r={},i.m=n=[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o=(a.prototype.encodedLength=function(t){return this._paddingCharacter?(t+2)/3*4|0:(8*t+5)/6|0},a.prototype.encode=function(t){for(var e="",n=0;n<t.length-2;n+=3){var r=t[n]<<16|t[n+1]<<8|t[n+2];e+=this._encodeByte(r>>>18&63),e+=this._encodeByte(r>>>12&63),e+=this._encodeByte(r>>>6&63),e+=this._encodeByte(r>>>0&63)}var i=t.length-n;return 0<i&&(r=t[n]<<16|(2==i?t[n+1]<<8:0),e+=this._encodeByte(r>>>18&63),e+=this._encodeByte(r>>>12&63),e+=2==i?this._encodeByte(r>>>6&63):this._paddingCharacter||"",e+=this._paddingCharacter||""),e},a.prototype.maxDecodedLength=function(t){return this._paddingCharacter?t/4*3|0:(6*t+7)/8|0},a.prototype.decodedLength=function(t){return this.maxDecodedLength(t.length-this._getPaddingLength(t))},a.prototype.decode=function(t){if(0===t.length)return new Uint8Array(0);for(var e=this._getPaddingLength(t),n=t.length-e,r=new Uint8Array(this.maxDecodedLength(n)),i=0,o=0,a=0,s=0,c=0,u=0,l=0;o<n-4;o+=4)s=this._decodeChar(t.charCodeAt(o+0)),c=this._decodeChar(t.charCodeAt(o+1)),u=this._decodeChar(t.charCodeAt(o+2)),l=this._decodeChar(t.charCodeAt(o+3)),r[i++]=s<<2|c>>>4,r[i++]=c<<4|u>>>2,r[i++]=u<<6|l,a|=256&s,a|=256&c,a|=256&u,a|=256&l;if(o<n-1&&(s=this._decodeChar(t.charCodeAt(o)),c=this._decodeChar(t.charCodeAt(o+1)),r[i++]=s<<2|c>>>4,a|=256&s,a|=256&c),o<n-2&&(u=this._decodeChar(t.charCodeAt(o+2)),r[i++]=c<<4|u>>>2,a|=256&u),o<n-3&&(l=this._decodeChar(t.charCodeAt(o+3)),r[i++]=u<<6|l,a|=256&l),0!==a)throw new Error("Base64Coder: incorrect characters for decoding");return r},a.prototype._encodeByte=function(t){var e=t;return e+=65,e+=25-t>>>8&6,e+=51-t>>>8&-75,e+=61-t>>>8&-15,e+=62-t>>>8&3,String.fromCharCode(e)},a.prototype._decodeChar=function(t){var e=256;return e+=(42-t&t-44)>>>8&-256+t-43+62,e+=(46-t&t-48)>>>8&-256+t-47+63,e+=(47-t&t-58)>>>8&-256+t-48+52,(e+=(64-t&t-91)>>>8&-256+t-65)+((96-t&t-123)>>>8&-256+t-97+26)},a.prototype._getPaddingLength=function(t){var e=0;if(this._paddingCharacter){for(var n=t.length-1;0<=n&&t[n]===this._paddingCharacter;n--)e++;if(t.length<4||2<e)throw new Error("Base64Coder: incorrect padding")}return e},a);function a(t){void 0===t&&(t="="),this._paddingCharacter=t}var s=new(e.Coder=o);e.encode=function(t){return s.encode(t)},e.decode=function(t){return s.decode(t)};var c,o=(i(u,c=o),u.prototype._encodeByte=function(t){var e=t;return e+=65,e+=25-t>>>8&6,e+=51-t>>>8&-75,e+=61-t>>>8&-13,e+=62-t>>>8&49,String.fromCharCode(e)},u.prototype._decodeChar=function(t){var e=256;return e+=(44-t&t-46)>>>8&-256+t-45+62,e+=(94-t&t-96)>>>8&-256+t-95+63,e+=(47-t&t-58)>>>8&-256+t-48+52,(e+=(64-t&t-91)>>>8&-256+t-65)+((96-t&t-123)>>>8&-256+t-97+26)},u);function u(){return null!==c&&c.apply(this,arguments)||this}var l=new(e.URLSafeCoder=o);e.encodeURLSafe=function(t){return l.encode(t)},e.decodeURLSafe=function(t){return l.decode(t)},e.encodedLength=function(t){return s.encodedLength(t)},e.maxDecodedLength=function(t){return s.maxDecodedLength(t)},e.decodedLength=function(t){return s.decodedLength(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c="utf8: invalid source encoding";function o(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<128)e+=1;else if(r<2048)e+=2;else if(r<55296)e+=3;else{if(!(r<=57343))throw new Error("utf8: invalid string");if(n>=t.length-1)throw new Error("utf8: invalid string");n++,e+=4}}return e}e.encode=function(t){for(var e=new Uint8Array(o(t)),n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=192|i>>6:(i<55296?e[n++]=224|i>>12:(r++,i=(1023&i)<<10,i|=1023&t.charCodeAt(r),i+=65536,e[n++]=240|i>>18,e[n++]=128|i>>12&63),e[n++]=128|i>>6&63),e[n++]=128|63&i)}return e},e.encodedLength=o,e.decode=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(128&r){var i=void 0;if(r<224){if(n>=t.length)throw new Error(c);if(128!=(192&(o=t[++n])))throw new Error(c);r=(31&r)<<6|63&o,i=128}else if(r<240){if(n>=t.length-1)throw new Error(c);var o=t[++n],a=t[++n];if(128!=(192&o)||128!=(192&a))throw new Error(c);r=(15&r)<<12|(63&o)<<6|63&a,i=2048}else{if(!(r<248))throw new Error(c);if(n>=t.length-2)throw new Error(c);o=t[++n],a=t[++n];var s=t[++n];if(128!=(192&o)||128!=(192&a)||128!=(192&s))throw new Error(c);r=(15&r)<<18|(63&o)<<12|(63&a)<<6|63&s,i=65536}if(r<i||55296<=r&&r<=57343)throw new Error(c);if(65536<=r){if(1114111<r)throw new Error(c);r-=65536,e.push(String.fromCharCode(55296|r>>10)),r=56320|1023&r}}e.push(String.fromCharCode(r))}return e.join("")}},function(t,e,n){t.exports=n(3)["default"]},function(t,n,e){"use strict";e.r(n);var r,i,o,a,s,c,u,l,d,p=(B.prototype.create=function(t){this.lastId++;var e=this.lastId,n=this.prefix+e,r=this.name+"["+e+"]",i=!1,o=function o(){i||(t.apply(null,arguments),i=!0)};return{number:e,id:n,name:r,callback:this[e]=o}},B.prototype.remove=function(t){delete this[t.number]},B),h=new p("_pusher_script_","Pusher.ScriptReceivers"),f={VERSION:"7.0.2",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},m=(H.prototype.load=function(i,t,e){var o,a,s=this;s.loading[i]&&0<s.loading[i].length?s.loading[i].push(e):(s.loading[i]=[e],o=pn.createScriptRequest(s.getPath(i,t)),a=s.receivers.create(function(t){if(s.receivers.remove(a),s.loading[i]){var e=s.loading[i];delete s.loading[i];for(var n=function n(t){t||o.cleanup()},r=0;r<e.length;r++)e[r](t,n)}}),o.send(a))},H.prototype.getRoot=function(t){var e=pn.getDocument().location.protocol;return(t&&t.useTLS||"https:"===e?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},H.prototype.getPath=function(t,e){return this.getRoot(e)+"/"+t+this.options.suffix+".js"},H),v=new p("_pusher_dependencies","Pusher.DependenciesReceivers"),g=new m({cdn_http:f.cdn_http,cdn_https:f.cdn_https,version:f.VERSION,suffix:f.dependency_suffix,receivers:v}),y={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},b=function b(t){var e,t=y.urls[t];return t?(t.fullUrl?e=t.fullUrl:t.path&&(e=y.baseUrl+t.path),e?"See: "+e:""):""},w=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),_=(d=Error,w(j,d),j),S=(l=Error,w(M,l),M),E=(u=Error,w(D,u),D),T=(c=Error,w(N,c),N),O=(s=Error,w(x,s),x),C=(a=Error,w(L,a),L),I=(o=Error,w(R,o),R),k=(i=Error,w(A,i),A),P=function P(t,e,r){var i,n,o=this;for(n in(i=pn.createXHR()).open("POST",o.options.authEndpoint,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)i.setRequestHeader(n,this.authOptions.headers[n]);return i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status){var t=void 0,e=!1;try{t=JSON.parse(i.responseText),e=!0}catch(t){r(new k(200,"JSON returned from auth endpoint was invalid, yet status code was 200. Data was: "+i.responseText),{auth:""})}e&&r(null,t)}else{var n=b("authenticationEndpoint");r(new k(i.status,"Unable to retrieve auth string from auth endpoint - received status: "+i.status+" from "+o.options.authEndpoint+". Clients must be authenticated to join private or presence channels. "+n),{auth:""})}},i.send(this.composeQuery(e)),i};function A(t,e){var n=this.constructor,e=i.call(this,e)||this;return e.status=t,Object.setPrototypeOf(e,n.prototype),e}function R(t){var e=this.constructor,t=o.call(this,t)||this;return Object.setPrototypeOf(t,e.prototype),t}function L(t){var e=this.constructor,t=a.call(this,t)||this;return Object.setPrototypeOf(t,e.prototype),t}function x(t){var e=this.constructor,t=s.call(this,t)||this;return Object.setPrototypeOf(t,e.prototype),t}function N(t){var e=this.constructor,t=c.call(this,t)||this;return Object.setPrototypeOf(t,e.prototype),t}function D(t){var e=this.constructor,t=u.call(this,t)||this;return Object.setPrototypeOf(t,e.prototype),t}function M(t){var e=this.constructor,t=l.call(this,t)||this;return Object.setPrototypeOf(t,e.prototype),t}function j(t){var e=this.constructor,t=d.call(this,t)||this;return Object.setPrototypeOf(t,e.prototype),t}function H(t){this.options=t,this.receivers=t.receivers||h,this.loading={}}function B(t,e){this.lastId=0,this.prefix=t,this.name=e}for(var U=String.fromCharCode,V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q={},z=0,F=V.length;z<F;z++)q[V.charAt(z)]=z;var G,X=function X(t){var e=t.charCodeAt(0);return e<128?t:e<2048?U(192|e>>>6)+U(128|63&e):U(224|e>>>12&15)+U(128|e>>>6&63)+U(128|63&e)},K=function K(t){return t.replace(/[^\x00-\x7F]/g,X)},W=function W(t){var e=[0,2,1][t.length%3],t=t.charCodeAt(0)<<16|(1<t.length?t.charCodeAt(1):0)<<8|(2<t.length?t.charCodeAt(2):0);return[V.charAt(t>>>18),V.charAt(t>>>12&63),2<=e?"=":V.charAt(t>>>6&63),1<=e?"=":V.charAt(63&t)].join("")},J=window.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,W)},Y=(Q.prototype.isRunning=function(){return null!==this.timer},Q.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},Q),$=(G=function(t,e){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}G(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function Q(t,e,n,r){var i=this;this.clear=e,this.timer=t(function(){i.timer&&(i.timer=r(i.timer))},n)}function Z(t){window.clearTimeout(t)}function tt(t){window.clearInterval(t)}var et,nt,rt=($(ut,nt=Y),ut),it=($(ct,et=Y),ct),ot=function(){return Date.now?Date.now():(new Date).valueOf()},at=function(t){return new rt(0,t)},st=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,r.concat(arguments))}};function ct(t,e){return et.call(this,setInterval,tt,t,function(t){return e(),t})||this}function ut(t,e){return nt.call(this,setTimeout,Z,t,function(t){return e(),null})||this}function lt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var i,o=e[r];for(i in o)o[i]&&o[i].constructor&&o[i].constructor===Object?t[i]=lt(t[i]||{},o[i]):t[i]=o[i]}return t}function dt(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}function pt(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function ht(t){var n=[];return pt(t,function(t,e){n.push(e)}),n}function ft(t,e,n){for(var r=0;r<t.length;r++)e.call(n||window,t[r],r,t)}function mt(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r,t,n));return n}function vt(t,e){e=e||function(t){return!!t};for(var n=[],r=0;r<t.length;r++)e(t[r],r,t,n)&&n.push(t[r]);return n}function gt(n,r){var i={};return pt(n,function(t,e){(r&&r(t,e,n,i)||Boolean(t))&&(i[e]=t)}),i}function yt(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1}function bt(t){return n=function n(t){return"object"==_typeof(t)&&(t=wt(t)),encodeURIComponent((n=t.toString(),J(K(n))));var n},r={},pt(t,function(t,e){r[e]=n(t)}),r;var n,r}function wt(o){try{return JSON.stringify(o)}catch(t){return JSON.stringify((a=[],s=[],function o(t,e){var n,r,i;switch(_typeof(t)){case"object":if(!t)return null;for(n=0;n<a.length;n+=1)if(a[n]===t)return{$ref:s[n]};if(a.push(t),s.push(e),"[object Array]"===Object.prototype.toString.apply(t))for(i=[],n=0;n<t.length;n+=1)i[n]=o(t[n],e+"["+n+"]");else for(r in i={},t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=o(t[r],e+"["+JSON.stringify(r)+"]"));return i;case"number":case"string":case"boolean":return t}}(o,"$")))}var a,s}var _t=(kt.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLog,t)},kt.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLogWarn,t)},kt.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.log(this.globalLogError,t)},kt.prototype.globalLogWarn=function(t){window.console&&window.console.warn?window.console.warn(t):this.globalLog(t)},kt.prototype.globalLogError=function(t){window.console&&window.console.error?window.console.error(t):this.globalLogWarn(t)},kt.prototype.log=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=function(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):t.push(wt(arguments[e]));return t.join(" : ")}.apply(this,arguments);On.log?On.log(r):On.logToConsole&&t.bind(this)(r)},new kt),St=function St(t,e,n){void 0!==this.authOptions.headers&&_t.warn("To send headers with the auth request, you must use AJAX, rather than JSONP.");var r=t.nextAuthCallbackID.toString();t.nextAuthCallbackID++;var i=t.getDocument(),o=i.createElement("script");t.auth_callbacks[r]=function(t){n(null,t)};r="Pusher.auth_callbacks['"+r+"']";o.src=this.options.authEndpoint+"?callback="+encodeURIComponent(r)+"&"+this.composeQuery(e);i=i.getElementsByTagName("head")[0]||i.documentElement;i.insertBefore(o,i.firstChild)},Et=(It.prototype.send=function(t){var e=this,n="Error loading "+e.src;e.script=document.createElement("script"),e.script.id=t.id,e.script.src=e.src,e.script.type="text/javascript",e.script.charset="UTF-8",e.script.addEventListener?(e.script.onerror=function(){t.callback(n)},e.script.onload=function(){t.callback(null)}):e.script.onreadystatechange=function(){"loaded"!==e.script.readyState&&"complete"!==e.script.readyState||t.callback(null)},void 0===e.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(e.errorScript=document.createElement("script"),e.errorScript.id=t.id+"_error",e.errorScript.text=t.name+"('"+n+"');",e.script.async=e.errorScript.async=!1):e.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(e.script,r.firstChild),e.errorScript&&r.insertBefore(e.errorScript,e.script.nextSibling)},It.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},It),Tt=(Ct.prototype.send=function(t){var e,n;this.request||(e=mt((e=bt(gt(e=this.data,function(t){return void 0!==t})),n=[],pt(e,function(t,e){n.push([e,t])}),n),st("join","=")).join("&"),e=this.url+"/"+t.number+"?"+e,this.request=pn.createScriptRequest(e),this.request.send(t))},Ct.prototype.cleanup=function(){this.request&&this.request.cleanup()},Ct),Ot={name:"jsonp",getAgent:function(o,a){return function(t,n){var e="http"+(a?"s":"")+"://"+(o.host||o.options.host)+o.options.path,r=pn.createJSONPRequest(e,t),i=pn.ScriptReceivers.create(function(t,e){h.remove(i),r.cleanup(),e&&e.host&&(o.host=e.host),n&&n(t,e)});r.send(i)}}};function Ct(t,e){this.url=t,this.data=e}function It(t){this.src=t}function kt(){this.globalLog=function(t){window.console&&window.console.log&&window.console.log(t)}}function Pt(t,e,n){return t+(e.useTLS?"s":"")+"://"+(e.useTLS?e.hostTLS:e.hostNonTLS)+n}function At(t,e){return"/app/"+t+"?protocol="+f.PROTOCOL+"&client=js&version="+f.VERSION+(e?"&"+e:"")}var Rt={getInitial:function(t,e){return Pt("ws",e,(e.httpPath||"")+At(t,"flash=false"))}},p={getInitial:function(t,e){return Pt("http",e,(e.httpPath||"/pusher")+At(t))}},m={getInitial:function(t,e){return Pt("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return At(t)}},Lt=(xt.prototype.get=function(t){return this._callbacks["_"+t]},xt.prototype.add=function(t,e,n){t="_"+t;this._callbacks[t]=this._callbacks[t]||[],this._callbacks[t].push({fn:e,context:n})},xt.prototype.remove=function(t,e,n){t||e||n?(t=t?["_"+t]:ht(this._callbacks),e||n?this.removeCallback(t,e,n):this.removeAllCallbacks(t)):this._callbacks={}},xt.prototype.removeCallback=function(t,e,n){ft(t,function(t){this._callbacks[t]=vt(this._callbacks[t]||[],function(t){return e&&e!==t.fn||n&&n!==t.context}),0===this._callbacks[t].length&&delete this._callbacks[t]},this)},xt.prototype.removeAllCallbacks=function(t){ft(t,function(t){delete this._callbacks[t]},this)},xt);function xt(){this._callbacks={}}var Nt,Dt,Mt=(Ut.prototype.bind=function(t,e,n){return this.callbacks.add(t,e,n),this},Ut.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},Ut.prototype.unbind=function(t,e,n){return this.callbacks.remove(t,e,n),this},Ut.prototype.unbind_global=function(e){return this.global_callbacks=e?vt(this.global_callbacks||[],function(t){return t!==e}):[],this},Ut.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},Ut.prototype.emit=function(t,e,n){for(var r=0;r<this.global_callbacks.length;r++)this.global_callbacks[r](t,e);var i=this.callbacks.get(t),o=[];if(n?o.push(e,n):e&&o.push(e),i&&0<i.length)for(r=0;r<i.length;r++)i[r].fn.apply(i[r].context||window,o);else this.failThrough&&this.failThrough(t,e);return this},Ut),jt=((Dt=function(t,e){return(Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Dt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(Bt,Nt=Mt),Bt.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},Bt.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},Bt.prototype.connect=function(){var t=this;if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return at(function(){t.onError(e),t.changeState("closed")}),!1}return this.bindListeners(),_t.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},Bt.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},Bt.prototype.send=function(t){var e=this;return"open"===this.state&&(at(function(){e.socket&&e.socket.send(t)}),!0)},Bt.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},Bt.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},Bt.prototype.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))},Bt.prototype.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},Bt.prototype.onMessage=function(t){this.emit("message",t)},Bt.prototype.onActivity=function(){this.emit("activity")},Bt.prototype.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){e.onActivity()})},Bt.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},Bt.prototype.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},Bt.prototype.buildTimelineMessage=function(t){return lt({cid:this.id},t)},Bt),w=(Ht.prototype.isSupported=function(t){return this.hooks.isSupported(t)},Ht.prototype.createConnection=function(t,e,n,r){return new jt(this.hooks,t,e,n,r)},Ht),$=new w({urls:Rt,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(pn.getWebSocketAPI())},isSupported:function(){return Boolean(pn.getWebSocketAPI())},getSocket:function(t){return pn.createWebSocket(t)}}),Y={urls:p,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Rt=lt({getSocket:function(t){return pn.HTTPFactory.createStreamingSocket(t)}},Y),p=lt({getSocket:function(t){return pn.HTTPFactory.createPollingSocket(t)}},Y),Y={isSupported:function(){return pn.isXHRSupported()}},$={ws:$,xhr_streaming:new w(lt({},Rt,Y)),xhr_polling:new w(lt({},p,Y))},Y=new w({file:"sockjs",urls:m,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(t,e){return new window.SockJS(t,null,{js_path:g.getPath("sockjs",{useTLS:e.useTLS}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(t,e){t.send(JSON.stringify({path:e}))}}),m={isSupported:function(t){return pn.isXDRSupported(t.useTLS)}},Rt=new w(lt({},Rt,m)),m=new w(lt({},p,m));function Ht(t){this.hooks=t}function Bt(t,e,n,r,i){var o=Nt.call(this)||this;return o.initialize=pn.transportConnectionInitializer,o.hooks=t,o.name=e,o.priority=n,o.key=r,o.options=i,o.state="new",o.timeline=i.timeline,o.activityTimeout=i.activityTimeout,o.id=o.timeline.generateUniqueID(),o}function Ut(t){this.callbacks=new Lt,this.global_callbacks=[],this.failThrough=t}$.xdr_streaming=Rt,$.xdr_polling=m,$.sockjs=Y;var Vt,qt,zt,Ft,Gt,Xt,Kt,Wt,Jt,Yt,$t,Qt,Zt,te,$=$,ee=((te=function(t,e){return(te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}te(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(Ae,Zt=Mt),Ae.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},new Ae),ne=(Pe.prototype.createConnection=function(t,e,n,r){var i=this;r=lt({},r,{activityTimeout:this.pingDelay});var o=this.transport.createConnection(t,e,n,r),a=null,s=function s(){o.unbind("open",s),o.bind("closed",c),a=ot()},c=function c(t){o.unbind("closed",c),1002===t.code||1003===t.code?i.manager.reportDeath():t.wasClean||!a||(t=ot()-a)<2*i.maxPingDelay&&(i.manager.reportDeath(),i.pingDelay=Math.max(t/2,i.minPingDelay))};return o.bind("open",s),o},Pe.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},Pe),re={decodeMessage:function(t){try{var e,n=(e=JSON.parse(t.data)).data;if("string"==typeof n)try{n=JSON.parse(e.data)}catch(t){}var r={event:e.event,channel:e.channel,data:n};return e.user_id&&(r.user_id=e.user_id),r}catch(e){throw{type:"MessageParseError",error:e,data:t.data}}},encodeMessage:function(t){return JSON.stringify(t)},processHandshake:function(t){t=re.decodeMessage(t);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(t){return t.code<4e3?1002<=t.code&&t.code<=1004?"backoff":null:4e3===t.code?"tls_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},getCloseError:function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},ie=re,oe=((Qt=function(t,e){return(Qt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Qt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(ke,$t=Mt),ke.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},ke.prototype.send=function(t){return this.transport.send(t)},ke.prototype.send_event=function(t,e,n){e={event:t,data:e};return n&&(e.channel=n),_t.debug("Event sent",e),this.send(ie.encodeMessage(e))},ke.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},ke.prototype.close=function(){this.transport.close()},ke.prototype.bindListeners=function(){var n=this,t={message:function(t){var e;try{e=ie.decodeMessage(t)}catch(e){n.emit("error",{type:"MessageParseError",error:e,data:t.data})}if(void 0!==e){switch(_t.debug("Event recd",e),e.event){case"pusher:error":n.emit("error",{type:"PusherError",data:e.data});break;case"pusher:ping":n.emit("ping");break;case"pusher:pong":n.emit("pong")}n.emit("message",e)}},activity:function(){n.emit("activity")},error:function(t){n.emit("error",t)},closed:function(t){e(),t&&t.code&&n.handleCloseEvent(t),n.transport=null,n.emit("closed")}},e=function e(){pt(t,function(t,e){n.transport.unbind(e,t)})};pt(t,function(t,e){n.transport.bind(e,t)})},ke.prototype.handleCloseEvent=function(t){var e=ie.getCloseAction(t),t=ie.getCloseError(t);t&&this.emit("error",t),e&&this.emit(e,{action:e,error:t})},ke),ae=(Ie.prototype.close=function(){this.unbindListeners(),this.transport.close()},Ie.prototype.bindListeners=function(){var n=this;this.onMessage=function(t){var e;n.unbindListeners();try{e=ie.processHandshake(t)}catch(t){return n.finish("error",{error:t}),void n.transport.close()}"connected"===e.action?n.finish("connected",{connection:new oe(e.id,n.transport),activityTimeout:e.activityTimeout}):(n.finish(e.action,{error:e.error}),n.transport.close())},this.onClosed=function(t){n.unbindListeners();var e=ie.getCloseAction(t)||"backoff",t=ie.getCloseError(t);n.finish(e,{error:t})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},Ie.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},Ie.prototype.finish=function(t,e){this.callback(lt({transport:this.transport,action:t},e))},Ie),se=(Ce.prototype.composeQuery=function(t){var e,n="socket_id="+encodeURIComponent(t)+"&channel_name="+encodeURIComponent(this.channel.name);for(e in this.authOptions.params)n+="&"+encodeURIComponent(e)+"="+encodeURIComponent(this.authOptions.params[e]);return n},Ce.prototype.authorize=function(t,e){(Ce.authorizers=Ce.authorizers||pn.getAuthorizers())[this.type].call(this,pn,t,e)},Ce),ce=(Oe.prototype.send=function(t,e){this.timeline.isEmpty()||this.timeline.send(pn.TimelineTransport.getAgent(this,t),e)},Oe),ue=((Yt=function(t,e){return(Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Yt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(Te,Jt=Mt),Te.prototype.authorize=function(t,e){return e(null,{auth:""})},Te.prototype.trigger=function(t,e){if(0!==t.indexOf("client-"))throw new _("Event '"+t+"' does not start with 'client-'");var n;return this.subscribed||(n=b("triggeringClientEvents"),_t.warn("Client event triggered before channel 'subscription_succeeded' event . "+n)),this.pusher.send_event(t,e,this.name)},Te.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},Te.prototype.handleEvent=function(t){var e=t.event,n=t.data;"pusher_internal:subscription_succeeded"===e?this.handleSubscriptionSucceededEvent(t):0!==e.indexOf("pusher_internal:")&&this.emit(e,n,{})},Te.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",t.data)},Te.prototype.subscribe=function(){var n=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(t,e){t?(n.subscriptionPending=!1,_t.error(t.toString()),n.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:t.message},t instanceof k?{status:t.status}:{}))):n.pusher.send_event("pusher:subscribe",{auth:e.auth,channel_data:e.channel_data,channel:n.name})}))},Te.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},Te.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},Te.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},Te),le=((Wt=function(t,e){return(Wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Wt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(Ee,Kt=ue),Ee.prototype.authorize=function(t,e){return Re.createAuthorizer(this,this.pusher.config).authorize(t,e)},Ee),de=(Se.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},Se.prototype.each=function(n){var r=this;pt(this.members,function(t,e){n(r.get(e))})},Se.prototype.setMyID=function(t){this.myID=t},Se.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},Se.prototype.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},Se.prototype.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},Se.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},Se),pe=((Xt=function(t,e){return(Xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Xt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(_e,Gt=le),_e.prototype.authorize=function(t,r){var i=this;Gt.prototype.authorize.call(this,t,function(t,e){if(!t){if(void 0===e.channel_data){var n=b("authenticationEndpoint");return _t.error("Invalid auth response for channel '"+i.name+"',expected 'channel_data' field. "+n),void r("Invalid auth response")}n=JSON.parse(e.channel_data);i.members.setMyID(n.user_id)}r(t,e)})},_e.prototype.handleEvent=function(t){var e,n,r=t.event;0===r.indexOf("pusher_internal:")?this.handleInternalEvent(t):(e=t.data,n={},t.user_id&&(n.user_id=t.user_id),this.emit(r,e,n))},_e.prototype.handleInternalEvent=function(t){var e=t.event,n=t.data;switch(e){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(t);break;case"pusher_internal:member_added":var r=this.members.addMember(n);this.emit("pusher:member_added",r);break;case"pusher_internal:member_removed":r=this.members.removeMember(n);r&&this.emit("pusher:member_removed",r)}},_e.prototype.handleSubscriptionSucceededEvent=function(t){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(t.data),this.emit("pusher:subscription_succeeded",this.members))},_e.prototype.disconnect=function(){this.members.reset(),Gt.prototype.disconnect.call(this)},_e),he=e(1),fe=e(0),me=((Ft=function(t,e){return(Ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ft(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(we,zt=le),we.prototype.authorize=function(t,n){var r=this;zt.prototype.authorize.call(this,t,function(t,e){t?n(t,e):(t=e.shared_secret)?(r.key=Object(fe.decode)(t),delete e.shared_secret,n(null,e)):n(new Error("No shared_secret key in auth payload for encrypted channel: "+r.name),null)})},we.prototype.trigger=function(t,e){throw new O("Client events are not currently supported for encrypted channels")},we.prototype.handleEvent=function(t){var e=t.event,n=t.data;0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")?this.handleEncryptedEvent(e,n):zt.prototype.handleEvent.call(this,t)},we.prototype.handleEncryptedEvent=function(n,t){var r=this;if(this.key)if(t.ciphertext&&t.nonce){var i=Object(fe.decode)(t.ciphertext);if(i.length<this.nacl.secretbox.overheadLength)_t.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+i.length);else{var o=Object(fe.decode)(t.nonce);if(o.length<this.nacl.secretbox.nonceLength)_t.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+o.length);else{var a=this.nacl.secretbox.open(i,o,this.key);if(null===a)return _t.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,function(t,e){t?_t.error("Failed to make a request to the authEndpoint: "+e+". Unable to fetch new key, so dropping encrypted event"):null!==(a=r.nacl.secretbox.open(i,o,r.key))?r.emit(n,r.getDataToEmit(a)):_t.error("Failed to decrypt event with new key. Dropping encrypted event")});this.emit(n,this.getDataToEmit(a))}}}else _t.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);else _t.debug("Received encrypted event before key has been retrieved from the authEndpoint")},we.prototype.getDataToEmit=function(t){var e=Object(he.decode)(t);try{return JSON.parse(e)}catch(t){return e}},we),ve=((qt=function(t,e){return(qt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}qt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(be,Vt=Mt),be.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},be.prototype.send=function(t){return!!this.connection&&this.connection.send(t)},be.prototype.send_event=function(t,e,n){return!!this.connection&&this.connection.send_event(t,e,n)},be.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},be.prototype.isUsingTLS=function(){return this.usingTLS},be.prototype.startConnecting=function(){var n=this,r=function r(t,e){t?n.runner=n.strategy.connect(0,r):"error"===e.action?(n.emit("error",{type:"HandshakeError",error:e.error}),n.timeline.error({handshakeError:e.error})):(n.abortConnecting(),n.handshakeCallbacks[e.action](e))};this.runner=this.strategy.connect(0,r)},be.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},be.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},be.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},be.prototype.retryIn=function(t){var e=this;this.timeline.info({action:"retry",delay:t}),0<t&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new rt(t||0,function(){e.disconnectInternally(),e.connect()})},be.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},be.prototype.setUnavailableTimer=function(){var t=this;this.unavailableTimer=new rt(this.options.unavailableTimeout,function(){t.updateState("unavailable")})},be.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},be.prototype.sendActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new rt(this.options.pongTimeout,function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.retryIn(0)})},be.prototype.resetActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new rt(this.activityTimeout,function(){t.sendActivityCheck()}))},be.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},be.prototype.buildConnectionCallbacks=function(t){var e=this;return lt({},t,{message:function(t){e.resetActivityCheck(),e.emit("message",t)},ping:function(){e.send_event("pusher:pong",{})},activity:function(){e.resetActivityCheck()},error:function(t){e.emit("error",t)},closed:function(){e.abandonConnection(),e.shouldRetry()&&e.retryIn(1e3)}})},be.prototype.buildHandshakeCallbacks=function(t){var e=this;return lt({},t,{connected:function(t){e.activityTimeout=Math.min(e.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected",{socket_id:e.socket_id})}})},be.prototype.buildErrorCallbacks=function(){var n=this,t=function t(e){return function(t){t.error&&n.emit("error",{type:"WebSocketError",error:t.error}),e(t)}};return{tls_only:t(function(){n.usingTLS=!0,n.updateStrategy(),n.retryIn(0)}),refused:t(function(){n.disconnect()}),backoff:t(function(){n.retryIn(1e3)}),retry:t(function(){n.retryIn(0)})}},be.prototype.setConnection=function(t){for(var e in this.connection=t,this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},be.prototype.abandonConnection=function(){if(this.connection){for(var t in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}},be.prototype.updateState=function(t,e){var n,r=this.state;r!==(this.state=t)&&("connected"===(n=t)&&(n+=" with new socket ID "+e.socket_id),_t.debug("State changed",r+" -> "+n),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:r,current:t}),this.emit(t,e))},be.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},be),ge=(ye.prototype.add=function(t,e){return this.channels[t]||(this.channels[t]=function(t,e){if(0!==t.indexOf("private-encrypted-"))return 0===t.indexOf("private-")?Re.createPrivateChannel(t,e):0===t.indexOf("presence-")?Re.createPresenceChannel(t,e):Re.createChannel(t,e);if(e.config.nacl)return Re.createEncryptedChannel(t,e,e.config.nacl);e=b("encryptedChannelSupport");throw new O("Tried to subscribe to a private-encrypted- channel but no nacl implementation available. "+e)}(t,e)),this.channels[t]},ye.prototype.all=function(){return t=this.channels,e=[],pt(t,function(t){e.push(t)}),e;var t,e},ye.prototype.find=function(t){return this.channels[t]},ye.prototype.remove=function(t){var e=this.channels[t];return delete this.channels[t],e},ye.prototype.disconnect=function(){pt(this.channels,function(t){t.disconnect()})},ye);function ye(){this.channels={}}function be(t,e){var n=Vt.call(this)||this;n.state="initialized",n.connection=null,n.key=t,n.options=e,n.timeline=n.options.timeline,n.usingTLS=n.options.useTLS,n.errorCallbacks=n.buildErrorCallbacks(),n.connectionCallbacks=n.buildConnectionCallbacks(n.errorCallbacks),n.handshakeCallbacks=n.buildHandshakeCallbacks(n.errorCallbacks);e=pn.getNetwork();return e.bind("online",function(){n.timeline.info({netinfo:"online"}),"connecting"!==n.state&&"unavailable"!==n.state||n.retryIn(0)}),e.bind("offline",function(){n.timeline.info({netinfo:"offline"}),n.connection&&n.sendActivityCheck()}),n.updateStrategy(),n}function we(t,e,n){e=zt.call(this,t,e)||this;return e.key=null,e.nacl=n,e}function _e(t,e){e=Gt.call(this,t,e)||this;return e.members=new de,e}function Se(){this.reset()}function Ee(){return null!==Kt&&Kt.apply(this,arguments)||this}function Te(n,t){var e=Jt.call(this,function(t,e){_t.debug("No callbacks on "+n+" for "+t)})||this;return e.name=n,e.pusher=t,e.subscribed=!1,e.subscriptionPending=!1,e.subscriptionCancelled=!1,e}function Oe(t,e){this.timeline=t,this.options=e||{}}function Ce(t,e){this.channel=t;t=e.authTransport;if(void 0===pn.getAuthorizers()[t])throw"'"+t+"' is not a recognized auth transport";this.type=t,this.options=e,this.authOptions=e.auth||{}}function Ie(t,e){this.transport=t,this.callback=e,this.bindListeners()}function ke(t,e){var n=$t.call(this)||this;return n.id=t,n.transport=e,n.activityTimeout=e.activityTimeout,n.bindListeners(),n}function Pe(t,e,n){this.manager=t,this.transport=e,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}function Ae(){var t=Zt.call(this)||this,e=t;return void 0!==window.addEventListener&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1)),t}var Re={createChannels:function(){return new ge},createConnectionManager:function(t,e){return new ve(t,e)},createChannel:function(t,e){return new ue(t,e)},createPrivateChannel:function(t,e){return new le(t,e)},createPresenceChannel:function(t,e){return new pe(t,e)},createEncryptedChannel:function(t,e,n){return new me(t,e,n)},createTimelineSender:function(t,e){return new ce(t,e)},createAuthorizer:function(t,e){return e.authorizer?e.authorizer(t,e):new se(t,e)},createHandshake:function(t,e){return new ae(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new ne(t,e,n)}},Le=(je.prototype.getAssistant=function(t){return Re.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},je.prototype.isAlive=function(){return 0<this.livesLeft},je.prototype.reportDeath=function(){--this.livesLeft},je),xe=(Me.prototype.isSupported=function(){return yt(this.strategies,st("isSupported"))},Me.prototype.connect=function(n,r){var i=this,o=this.strategies,a=0,s=this.timeout,c=null,u=function u(t,e){e?r(null,e):(a+=1,i.loop&&(a%=o.length),a<o.length?(s&&(s*=2,i.timeoutLimit&&(s=Math.min(s,i.timeoutLimit))),c=i.tryStrategy(o[a],n,{timeout:s,failFast:i.failFast},u)):r(!0))},c=this.tryStrategy(o[a],n,{timeout:s,failFast:this.failFast},u);return{abort:function(){c.abort()},forceMinPriority:function(t){n=t,c&&c.forceMinPriority(t)}}},Me.prototype.tryStrategy=function(t,e,n,r){var i=null,o=null;return 0<n.timeout&&(i=new rt(n.timeout,function(){o.abort(),r(!0)})),o=t.connect(e,function(t,e){t&&i&&i.isRunning()&&!n.failFast||(i&&i.ensureAborted(),r(t,e))}),{abort:function(){i&&i.ensureAborted(),o.abort()},forceMinPriority:function(t){o.forceMinPriority(t)}}},Me),Ne=(De.prototype.isSupported=function(){return yt(this.strategies,st("isSupported"))},De.prototype.connect=function(t,a){return e=this.strategies,s=t,n=mt(e,function(t,e,n,r){return t.connect(s,(i=e,o=r,function(t,e){(o[i].error=t)?function(t){for(var e,n=0;n<t.length;n++)if(e=t[n],!Boolean(e.error))return;return 1}(o)&&a(!0):(ft(o,function(t){t.forceMinPriority(e.transport.priority)}),a(null,e))}));var i,o}),{abort:function(){ft(n,He)},forceMinPriority:function(e){ft(n,function(t){t.forceMinPriority(e)})}};var e,s,n},De);function De(t){this.strategies=t}function Me(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}function je(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}function He(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}var Be=(Ue.prototype.isSupported=function(){return this.strategy.isSupported()},Ue.prototype.connect=function(n,r){var t,i=this.usingTLS,o=function(t){var e;if(e=pn.getLocalStorage())try{var n=e[Ve(t)];if(n)return JSON.parse(n)}catch(e){qe(t)}return null}(i),a=[this.strategy];o&&o.timestamp+this.ttl>=ot()&&((t=this.transports[o.transport])&&(this.timeline.info({cached:!0,transport:o.transport,latency:o.latency}),a.push(new xe([t],{timeout:2*o.latency+1e3,failFast:!0}))));var s=ot(),c=a.pop().connect(n,function o(t,e){t?(qe(i),0<a.length?(s=ot(),c=a.pop().connect(n,o)):r(t)):(function(t,e,n){var r=pn.getLocalStorage();if(r)try{r[Ve(t)]=wt({timestamp:ot(),transport:e,latency:n})}catch(t){}}(i,e.transport.name,ot()-s),r(null,e))});return{abort:function(){c.abort()},forceMinPriority:function(t){n=t,c&&c.forceMinPriority(t)}}},Ue);function Ue(t,e,n){this.strategy=t,this.transports=e,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}function Ve(t){return"pusherTransport"+(t?"TLS":"NonTLS")}function qe(t){var e=pn.getLocalStorage();if(e)try{delete e[Ve(t)]}catch(t){}}var ze=(We.prototype.isSupported=function(){return this.strategy.isSupported()},We.prototype.connect=function(e,t){var n,r=this.strategy,i=new rt(this.options.delay,function(){n=r.connect(e,t)});return{abort:function(){i.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}},We),Fe=(Ke.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},Ke.prototype.connect=function(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)},Ke),Ge=(Xe.prototype.isSupported=function(){return this.strategy.isSupported()},Xe.prototype.connect=function(t,n){var r=this.strategy.connect(t,function(t,e){e&&r.abort(),n(t,e)});return r},Xe);function Xe(t){this.strategy=t}function Ke(t,e,n){this.test=t,this.trueBranch=e,this.falseBranch=n}function We(t,e){e=e.delay;this.strategy=t,this.options={delay:e}}function Je(t){return function(){return t.isSupported()}}var Ye,$e,Qe,Ze=function Ze(o,t,a){var s={};function e(t,e,n,r,i){i=a(o,t,e,n,r,i);return s[t]=i}var n=Object.assign({},t,{hostNonTLS:o.wsHost+":"+o.wsPort,hostTLS:o.wsHost+":"+o.wssPort,httpPath:o.wsPath}),r=Object.assign({},n,{useTLS:!0}),i=Object.assign({},t,{hostNonTLS:o.httpHost+":"+o.httpPort,hostTLS:o.httpHost+":"+o.httpsPort,httpPath:o.httpPath}),c={loop:!0,timeout:15e3,timeoutLimit:6e4},u=new Le({lives:2,minPingDelay:1e4,maxPingDelay:o.activityTimeout}),l=new Le({lives:2,minPingDelay:1e4,maxPingDelay:o.activityTimeout}),d=e("ws","ws",3,n,u),p=e("wss","ws",3,r,u),h=e("sockjs","sockjs",1,i),n=e("xhr_streaming","xhr_streaming",1,i,l),r=e("xdr_streaming","xdr_streaming",1,i,l),u=e("xhr_polling","xhr_polling",1,i),l=e("xdr_polling","xdr_polling",1,i),i=new xe([d],c),p=new xe([p],c),h=new xe([h],c),r=new xe([new Fe(Je(n),n,r)],c),l=new xe([new Fe(Je(u),u,l)],c),c=new xe([new Fe(Je(r),new Ne([r,new ze(l,{delay:4e3})]),l)],c),h=new Fe(Je(c),c,h),p=t.useTLS?new Ne([i,new ze(h,{delay:2e3})]):new Ne([i,new ze(p,{delay:2e3}),new ze(h,{delay:5e3})]);return new Be(new Ge(new Fe(Je(d),p,h)),s,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},tn={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new S),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&0<t.responseText.length&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&0<t.responseText.length&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(t){t.ontimeout=t.onerror=t.onprogress=t.onload=null,t.abort()}},en=((Qe=function(t,e){return(Qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Qe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(nn,$e=Mt),nn.prototype.start=function(t){var e=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){e.close()},pn.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)},nn.prototype.close=function(){this.unloader&&(pn.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},nn.prototype.onChunk=function(t,e){for(;;){var n=this.advanceBuffer(e);if(!n)break;this.emit("chunk",{status:t,data:n})}this.isBufferTooLong(e)&&this.emit("buffer_too_long")},nn.prototype.advanceBuffer=function(t){var e=t.slice(this.position),t=e.indexOf("\n");return-1!==t?(this.position+=t+1,e.slice(0,t)):null},nn.prototype.isBufferTooLong=function(t){return this.position===t.length&&262144<t.length},nn);function nn(t,e,n){var r=$e.call(this)||this;return r.hooks=t,r.method=e,r.url=n,r}(e=Ye=Ye||{})[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED";var rn=Ye,on=1;function an(t){var e=-1===t.indexOf("?")?"?":"&";return t+e+"t="+ +new Date+"&n="+on++}function sn(t){return Math.floor(Math.random()*t)}var cn=(hn.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},hn.prototype.ping=function(){this.hooks.sendHeartbeat(this)},hn.prototype.close=function(t,e){this.onClose(t,e,!0)},hn.prototype.sendRaw=function(t){if(this.readyState!==rn.OPEN)return!1;try{return pn.createSocketRequest("POST",an((e=this.location,n=this.session,e.base+"/"+n+"/xhr_send"))).start(t),!0}catch(t){return!1}var e,n},hn.prototype.reconnect=function(){this.closeStream(),this.openStream()},hn.prototype.onClose=function(t,e,n){this.closeStream(),this.readyState=rn.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:n})},hn.prototype.onChunk=function(t){var e;if(200===t.status)switch(this.readyState===rn.OPEN&&this.onActivity(),t.data.slice(0,1)){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var n=0;n<e.length;n++)this.onEvent(e[n]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0)}},hn.prototype.onOpen=function(t){var e;this.readyState===rn.CONNECTING?(t&&t.hostname&&(this.location.base=(e=this.location.base,t=t.hostname,(e=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e))[1]+t+e[3])),this.readyState=rn.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},hn.prototype.onEvent=function(t){this.readyState===rn.OPEN&&this.onmessage&&this.onmessage({data:t})},hn.prototype.onActivity=function(){this.onactivity&&this.onactivity()},hn.prototype.onError=function(t){this.onerror&&this.onerror(t)},hn.prototype.openStream=function(){var e=this;this.stream=pn.createSocketRequest("POST",an(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(t){e.onChunk(t)}),this.stream.bind("finished",function(t){e.hooks.onFinished(e,t)}),this.stream.bind("buffer_too_long",function(){e.reconnect()});try{this.stream.start()}catch(n){at(function(){e.onError(n),e.onClose(1006,"Could not start streaming",!1)})}},hn.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},hn),un={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}},ln={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}},dn={getRequest:function(t){var e=new(pn.getXHRAPI());return e.onreadystatechange=e.onprogress=function(){switch(e.readyState){case 3:e.responseText&&0<e.responseText.length&&t.onChunk(e.status,e.responseText);break;case 4:e.responseText&&0<e.responseText.length&&t.onChunk(e.status,e.responseText),t.emit("finished",e.status),t.close()}},e},abortRequest:function(t){t.onreadystatechange=null,t.abort()}},pn={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:h,DependenciesReceivers:v,getDefaultStrategy:Ze,Transports:$,transportConnectionInitializer:function(){var n=this;n.timeline.info(n.buildTimelineMessage({transport:n.name+(n.options.useTLS?"s":"")})),n.hooks.isInitialized()?n.changeState("initialized"):n.hooks.file?(n.changeState("initializing"),g.load(n.hooks.file,{useTLS:n.options.useTLS},function(t,e){n.hooks.isInitialized()?(n.changeState("initialized"),e(!0)):(t&&n.onError(t),n.onClose(),e(!1))})):n.onClose()},HTTPFactory:{createStreamingSocket:function(t){return this.createSocket(un,t)},createPollingSocket:function(t){return this.createSocket(ln,t)},createSocket:function(t,e){return new cn(t,e)},createXHR:function(t,e){return this.createRequest(dn,t,e)},createRequest:function(t,e,n){return new en(t,e,n)},createXDR:function(t,e){return this.createRequest(tn,t,e)}},TimelineTransport:Ot,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(t){var e=this;window.Pusher=t;var n=function n(){e.onDocumentBody(t.ready)};window.JSON?n():g.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:P,jsonp:St}},onDocumentBody:function(t){var e=this;document.body?t():setTimeout(function(){e.onDocumentBody(t)},0)},createJSONPRequest:function(t,e){return new Tt(t,e)},createScriptRequest:function(t){return new Et(t)},getLocalStorage:function(){try{return window.localStorage}catch(t){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return ee},createWebSocket:function(t){return new(this.getWebSocketAPI())(t)},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);if(this.isXDRSupported(0===e.indexOf("https:")))return this.HTTPFactory.createXDR(t,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var t=this.getXHRAPI();return Boolean(t)&&void 0!==(new t).withCredentials},isXDRSupported:function(t){var e=t?"https:":"http:",t=this.getProtocol();return Boolean(window.XDomainRequest)&&t===e},addUnloadListener:function(t){void 0!==window.addEventListener?window.addEventListener("unload",t,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",t)},removeUnloadListener:function(t){void 0!==window.addEventListener?window.removeEventListener("unload",t,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",t)}};function hn(t,e){this.hooks=t,this.session=sn(1e3)+"/"+function(){for(var t=[],e=0;e<8;e++)t.push(sn(32).toString(32));return t.join("")}(),this.location={base:(e=/([^\?]*)\/*(\??.*)/.exec(e))[1],queryString:e[2]},this.readyState=rn.CONNECTING,this.openStream()}(Ot=Tn=Tn||{})[Ot.ERROR=3]="ERROR",Ot[Ot.INFO=6]="INFO",Ot[Ot.DEBUG=7]="DEBUG";var fn=Tn,mn=(yn.prototype.log=function(t,e){t<=this.options.level&&(this.events.push(lt({},e,{timestamp:ot()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},yn.prototype.error=function(t){this.log(fn.ERROR,t)},yn.prototype.info=function(t){this.log(fn.INFO,t)},yn.prototype.debug=function(t){this.log(fn.DEBUG,t)},yn.prototype.isEmpty=function(){return 0===this.events.length},yn.prototype.send=function(t,n){var r=this,e=lt({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(e,function(t,e){t||r.sent++,n&&n(t,e)}),!0},yn.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},yn),vn=(gn.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},gn.prototype.connect=function(t,e){var n=this;if(!this.isSupported())return bn(new I,e);if(this.priority<t)return bn(new E,e);var r=!1,i=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),o=null,a=function a(){i.unbind("initialized",a),i.connect()},s=function s(){o=Re.createHandshake(i,function(t){r=!0,l(),e(null,t)})},c=function c(t){l(),e(t)},u=function u(){var t;l(),t=wt(i),e(new T(t))},l=function l(){i.unbind("initialized",a),i.unbind("open",s),i.unbind("error",c),i.unbind("closed",u)};return i.bind("initialized",a),i.bind("open",s),i.bind("error",c),i.bind("closed",u),i.initialize(),{abort:function(){r||(l(),(o||i).close())},forceMinPriority:function(t){r||n.priority<t&&(o||i).close()}}},gn);function gn(t,e,n,r){this.name=t,this.priority=e,this.transport=n,this.options=r||{}}function yn(t,e,n){this.key=t,this.session=e,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}function bn(t,e){return at(function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}var wn=pn.Transports,_n=function _n(t,e,n,r,i,o){var a=wn[n];if(!a)throw new C(n);return t.enabledTransports&&-1===dt(t.enabledTransports,e)||t.disabledTransports&&-1!==dt(t.disabledTransports,e)?Sn:(i=Object.assign({ignoreNullOrigin:t.ignoreNullOrigin},i),new vn(e,r,o?o.getAssistant(a):a,i))},Sn={isSupported:function(){return!1},connect:function(t,e){var n=at(function(){e(new I)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};function En(t){return"ws-"+t+".pusher.com"}var Tn=(Cn.ready=function(){Cn.isReady=!0;for(var t=0,e=Cn.instances.length;t<e;t++)Cn.instances[t].connect()},Cn.getClientFeatures=function(){return ht(gt({ws:pn.Transports.ws},function(t){return t.isSupported({})}))},Cn.prototype.channel=function(t){return this.channels.find(t)},Cn.prototype.allChannels=function(){return this.channels.all()},Cn.prototype.connect=function(){var t,e;this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer&&(t=this.connection.isUsingTLS(),e=this.timelineSender,this.timelineSenderTimer=new it(6e4,function(){e.send(t)}))},Cn.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},Cn.prototype.bind=function(t,e,n){return this.global_emitter.bind(t,e,n),this},Cn.prototype.unbind=function(t,e,n){return this.global_emitter.unbind(t,e,n),this},Cn.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},Cn.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},Cn.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},Cn.prototype.subscribeAll=function(){for(var t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},Cn.prototype.subscribe=function(t){t=this.channels.add(t,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t},Cn.prototype.unsubscribe=function(t){var e=this.channels.find(t);e&&e.subscriptionPending?e.cancelSubscription():(e=this.channels.remove(t))&&e.subscribed&&e.unsubscribe()},Cn.prototype.send_event=function(t,e,n){return this.connection.send_event(t,e,n)},Cn.prototype.shouldUseTLS=function(){return this.config.useTLS},Cn.instances=[],Cn.isReady=!1,Cn.logToConsole=!1,Cn.Runtime=pn,Cn.ScriptReceivers=pn.ScriptReceivers,Cn.DependenciesReceivers=pn.DependenciesReceivers,Cn.auth_callbacks=pn.auth_callbacks,Cn),On=n["default"]=Tn;function Cn(t,e){var n,r=this;(function(){if(null==t)throw"You must pass your app key when you instantiate Pusher."})(),(e=e||{}).cluster||e.wsHost||e.httpHost||(n=b("javascriptQuickStart"),_t.warn("You should always specify a cluster when connecting. "+n)),"disableStats"in e&&_t.warn("The disableStats option is deprecated in favor of enableStats"),this.key=t,this.config=(e={activityTimeout:(n=e).activityTimeout||f.activityTimeout,authEndpoint:n.authEndpoint||f.authEndpoint,authTransport:n.authTransport||f.authTransport,cluster:n.cluster||f.cluster,httpPath:n.httpPath||f.httpPath,httpPort:n.httpPort||f.httpPort,httpsPort:n.httpsPort||f.httpsPort,pongTimeout:n.pongTimeout||f.pongTimeout,statsHost:n.statsHost||f.stats_host,unavailableTimeout:n.unavailableTimeout||f.unavailableTimeout,wsPath:n.wsPath||f.wsPath,wsPort:n.wsPort||f.wsPort,wssPort:n.wssPort||f.wssPort,enableStats:"enableStats"in(e=n)?e.enableStats:"disableStats"in e&&!e.disableStats,httpHost:(e=n).httpHost||(e.cluster?"sockjs-"+e.cluster+".pusher.com":f.httpHost),useTLS:(e=n,"https:"===pn.getProtocol()||!1!==e.forceTLS),wsHost:(e=n).wsHost||(e.cluster?En(e.cluster):En(f.cluster))},"auth"in n&&(e.auth=n.auth),"authorizer"in n&&(e.authorizer=n.authorizer),"disabledTransports"in n&&(e.disabledTransports=n.disabledTransports),"enabledTransports"in n&&(e.enabledTransports=n.enabledTransports),"ignoreNullOrigin"in n&&(e.ignoreNullOrigin=n.ignoreNullOrigin),"timelineParams"in n&&(e.timelineParams=n.timelineParams),"nacl"in n&&(e.nacl=n.nacl),e),this.channels=Re.createChannels(),this.global_emitter=new Mt,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new mn(this.key,this.sessionID,{cluster:this.config.cluster,features:Cn.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:fn.INFO,version:f.VERSION}),this.config.enableStats&&(this.timelineSender=Re.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+pn.TimelineTransport.name})),this.connection=Re.createConnectionManager(this.key,{getStrategy:function(t){return pn.getDefaultStrategy(r.config,t,_n)},timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())}),this.connection.bind("message",function(t){var e,n=0===t.event.indexOf("pusher_internal:");!t.channel||(e=r.channel(t.channel))&&e.handleEvent(t),n||r.global_emitter.emit(t.event,t.data)}),this.connection.bind("connecting",function(){r.channels.disconnect()}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(t){_t.warn(t)}),Cn.instances.push(this),this.timeline.info({instances:Cn.instances.length}),Cn.isReady&&this.connect()}pn.setup(Tn)}],i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2);function i(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,r},"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=n():"function"==typeof t&&t.amd?t([],n):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?exports.Pusher=n():e.Pusher=n(),Nn});